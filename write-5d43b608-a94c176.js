import{E as a,M as t,P as e,S as s}from"./parse-button-446abf34-a94c176.js";import{T as l}from"./TelegramPlane-4b765167-a94c176.js";import{d as o,aa as r,aP as n,k as i,o as u,r as c,B as m,l as p,h as d,aX as g,aY as b,aZ as f,a_ as h,b7 as v,F as w,I as j,b2 as y,b1 as x}from"./vendor-1e8bcb55-a94c176.js";import{H as C}from"./rounded-button-9d7b59f9-a94c176.js";import"./monaco-9095ad82-a94c176.js";import{U as P}from"./underline-input-bfdcb4a5-a94c176.js";import{R as k,B,a as E,e as S}from"./index-a94c176.js";import{u as T}from"./use-parse-payload-42a6f574-a94c176.js";import"./vue.runtime.esm-bundler-156adcd5-a94c176.js";const U=o((()=>{const o=r(),U=n({text:"",title:"",order:0,slug:"",subtitle:""}),q=i((()=>o.query.id));u((async()=>{const a=q.value;if(a&&"string"==typeof a){(a=>{T(U)(a)})((await k.api.pages(a).get({})).data)}}));const z=c(!1),F=m(),H=p(),I=async()=>{const a=()=>{try{if(!U.title||0==U.title.trim().length)throw"标题为空";if(!U.slug)throw"路径为空";return{...x(U),title:U.title.trim(),slug:U.slug.trim()}}catch(a){throw F.error(a),a}};if(q.value){if(!y(q.value))return;const t=q.value;await k.api.pages(t).put({data:a()}),F.success("修改成功")}else await k.api.pages.post({data:a()}),F.success("发布成功");H.push({name:S.ListPage,hash:"|publish"})};return()=>d(E,{actionsElement:d(w,null,d(e,{data:U}),d(C,{icon:d(l,null),onClick:I})),footerButtonElement:d(w,null,d("button",{onClick:()=>{z.value=!0}},d(j,null,d(s,null))))},d(t,{class:"mt-3 relative z-10",label:"与你有个好心情~",value:U.title,onChange:a=>{U.title=a}}),d("div",{class:"text-gray-500 py-3"},d("label",null,`${B}/`),d(P,{value:U.slug,onChange:a=>{U.slug=a}})),d(a,{loading:!(!q.value||U.title),onChange:a=>{U.text=a},text:U.text}),d(g,{show:z.value,width:450,style:{maxWidth:"90vw"},placement:"right",onUpdateShow:a=>{z.value=a}},d(b,{title:"文章设定"},d(f,null,d(h,{label:"页面顺序"},d(v,{placeholder:"",value:U.order,onChange:a=>{U.order=null!=a?a:0}}))))))}));export{U as default};
//# sourceMappingURL=write-5d43b608-a94c176.js.map
