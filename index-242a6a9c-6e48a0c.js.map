{"version":3,"file":"index-242a6a9c-6e48a0c.js","sources":["../node_modules/.pnpm/@vicons+antd@0.11.0/node_modules/@vicons/antd/CheckCircleOutlined.js","../src/views/setting/tabs/system.tsx","../src/views/setting/tabs/security.tsx","../src/views/setting/tabs/user.tsx","../src/views/setting/index.tsx"],"sourcesContent":["'use strict'\nObject.defineProperty(exports, '__esModule', { value: true })\nconst vue_1 = require('vue')\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 1024 1024'\n}\nconst _hoisted_2 = /*#__PURE__*/ vue_1.createVNode(\n  'path',\n  {\n    d: 'M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ vue_1.createVNode(\n  'path',\n  {\n    d: 'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nexports.default = vue_1.defineComponent({\n  name: 'CheckCircleOutlined',\n  render: function render(_ctx, _cache) {\n    return vue_1.openBlock(), vue_1.createBlock('svg', _hoisted_1, [_hoisted_2, _hoisted_3])\n  }\n})\n","import CheckCircleOutlined from '@vicons/antd/CheckCircleOutlined'\nimport { HeaderActionButton } from 'components/button/rounded-button'\nimport { useInjector } from 'hooks/use-deps-injection'\nimport { useLayout } from 'layouts/content'\nimport { cloneDeep, isEmpty, merge, omit } from 'lodash-es'\nimport { IConfig } from 'models/setting'\nimport {\n  NCollapse,\n  NCollapseItem,\n  NDynamicTags,\n  NForm,\n  NFormItem,\n  NFormItemGi,\n  NGrid,\n  NInput,\n  NInputNumber,\n  NSpace,\n  NSwitch,\n  NText,\n} from 'naive-ui'\nimport { UIStore } from 'stores/ui'\nimport { deepDiff, RESTManager } from 'utils'\nimport {\n  computed,\n  defineComponent,\n  onBeforeMount,\n  onMounted,\n  onUnmounted,\n  reactive,\n  ref,\n  toRaw,\n  watch,\n} from 'vue'\n\nconst NFormPrefixCls = 'mt-6'\nconst NFormBaseProps = {\n  class: NFormPrefixCls,\n  labelPlacement: 'left',\n  labelAlign: 'right',\n  labelWidth: 150,\n  autocomplete: 'chrome-off',\n}\n\nexport const autosizeableProps = {\n  autosize: true,\n  clearable: true,\n  style: 'min-width: 300px; max-width: 100%',\n} as const\nexport const TabSystem = defineComponent(() => {\n  const { setHeaderButton } = useLayout()\n\n  onMounted(() => {\n    setHeaderButton(\n      <HeaderActionButton\n        disabled={true}\n        onClick={save}\n        icon={<CheckCircleOutlined />}\n      ></HeaderActionButton>,\n    )\n  })\n\n  onUnmounted(() => {\n    setHeaderButton(null)\n  })\n\n  let originConfigs: IConfig = {} as IConfig\n  const configs = ref(mergeFullConfigs({}))\n  const diff = ref({} as Partial<IConfig>)\n\n  watch(\n    () => configs.value,\n    (n) => {\n      diff.value = deepDiff(originConfigs, toRaw(n))\n    },\n    { deep: true },\n  )\n  watch(\n    () => diff.value,\n    (n) => {\n      let canSave = false\n      if (isEmpty(n)) {\n        canSave = false\n      } else {\n        canSave = true\n      }\n      setHeaderButton(\n        <HeaderActionButton\n          disabled={!canSave}\n          icon={<CheckCircleOutlined />}\n          onClick={save}\n        ></HeaderActionButton>,\n      )\n    },\n  )\n\n  async function save() {\n    if (isEmpty(diff.value)) {\n      return\n    }\n\n    const entries = Object.entries(diff.value)\n\n    for await (const [key, value] of entries) {\n      if (key === 'seo') {\n        await RESTManager.api.options(key).patch({\n          data: {\n            ...(value as any),\n            keywords: configs.value.seo.keywords,\n          },\n        })\n      } else {\n        await RESTManager.api.options(key).patch({\n          data: value,\n        })\n      }\n    }\n\n    await fetchConfig()\n    message.success('修改成功')\n  }\n\n  const fetchConfig = async () => {\n    let response = (await RESTManager.api.options.get()) as any\n    response = mergeFullConfigs(omit(response, ['ok'])) as IConfig\n\n    originConfigs = cloneDeep(response)\n\n    configs.value = response\n  }\n\n  onBeforeMount(() => {\n    fetchConfig()\n  })\n\n  const expandedNames = ref<string[]>(['website'])\n  const uiStore = useInjector(UIStore)\n  const gridCols = computed(() => (uiStore.viewport.value.mobile ? 1 : 2))\n  const formProps = reactive(NFormBaseProps) as any\n\n  watch(\n    () => uiStore.viewport.value.mobile,\n    (n) => {\n      if (n) {\n        formProps.labelPlacement = 'top'\n        formProps.labelAlign = 'left'\n      } else {\n        formProps.labelPlacement = 'left'\n        formProps.labelAlign = 'right'\n      }\n    },\n    { immediate: true },\n  )\n  return () => (\n    <Fragment>\n      <div class=\"pt-4\"></div>\n\n      <NCollapse\n        accordion\n        displayDirective=\"if\"\n        expandedNames={expandedNames.value}\n        onUpdateExpandedNames={(e) => {\n          expandedNames.value = e\n        }}\n      >\n        <NCollapseItem title=\"网站设置\" name=\"website\">\n          <NForm {...formProps}>\n            <NGrid cols={gridCols.value} xGap={12}>\n              <NFormItemGi span={1} label=\"前端地址\">\n                <NInput\n                  value={configs.value.url.webUrl}\n                  onInput={(e) => void (configs.value.url.webUrl = e)}\n                ></NInput>\n              </NFormItemGi>\n\n              <NFormItemGi span={1} label=\"API 地址\">\n                <NInput\n                  value={configs.value.url.serverUrl}\n                  onInput={(e) => void (configs.value.url.serverUrl = e)}\n                ></NInput>\n              </NFormItemGi>\n\n              <NFormItemGi span={1} label=\"后台地址\">\n                <NInput\n                  value={configs.value.url.adminUrl}\n                  onInput={(e) => void (configs.value.url.adminUrl = e)}\n                ></NInput>\n              </NFormItemGi>\n\n              <NFormItemGi span={1} label=\"Gateway 地址\">\n                <NInput\n                  value={configs.value.url.wsUrl}\n                  onInput={(e) => void (configs.value.url.wsUrl = e)}\n                ></NInput>\n              </NFormItemGi>\n            </NGrid>\n          </NForm>\n        </NCollapseItem>\n        <NCollapseItem title=\"SEO 优化\" name=\"seo\">\n          <NForm {...formProps}>\n            <NFormItem label=\"网站标题\">\n              <NInput\n                {...autosizeableProps}\n                value={configs.value.seo.title}\n                onInput={(e) => void (configs.value.seo.title = e)}\n              ></NInput>\n            </NFormItem>\n\n            <NFormItem label=\"网站描述\">\n              <NInput\n                {...autosizeableProps}\n                value={configs.value.seo.description}\n                onInput={(e) => void (configs.value.seo.description = e)}\n              ></NInput>\n            </NFormItem>\n\n            <NFormItem label=\"关键字\">\n              <NDynamicTags\n                round\n                type=\"primary\"\n                value={configs.value.seo.keywords}\n                onChange={(e) => void (configs.value.seo.keywords = e)}\n              ></NDynamicTags>\n            </NFormItem>\n          </NForm>\n        </NCollapseItem>\n\n        <NCollapseItem title=\"评论设置\" name=\"comment\">\n          <NForm {...formProps}>\n            <NFormItem label=\"反垃圾评论\">\n              <NSwitch\n                value={configs.value.commentOptions.antiSpam}\n                onUpdateValue={(e) =>\n                  void (configs.value.commentOptions.antiSpam = e)\n                }\n              ></NSwitch>\n            </NFormItem>\n\n            <NFormItem label=\"自定义屏蔽关键词\">\n              <NDynamicTags\n                disabled={!configs.value.commentOptions.antiSpam}\n                value={configs.value.commentOptions.spamKeywords}\n                onUpdateValue={(e) =>\n                  void (configs.value.commentOptions.spamKeywords = e)\n                }\n                type=\"primary\"\n              ></NDynamicTags>\n            </NFormItem>\n\n            <NFormItem label=\"自定义屏蔽 IP\">\n              <NDynamicTags\n                disabled={!configs.value.commentOptions.antiSpam}\n                value={configs.value.commentOptions.blockIps}\n                onUpdateValue={(e) =>\n                  void (configs.value.commentOptions.blockIps = e)\n                }\n              ></NDynamicTags>\n            </NFormItem>\n\n            <NFormItem label=\"禁止非中文评论\">\n              <NSwitch\n                value={configs.value.commentOptions.disableNoChinese}\n                onUpdateValue={(e) =>\n                  void (configs.value.commentOptions.disableNoChinese = e)\n                }\n              />\n            </NFormItem>\n          </NForm>\n        </NCollapseItem>\n\n        <NCollapseItem title=\"评论回复设置\" name=\"reply\">\n          <NForm {...formProps}>\n            <NFormItem label=\"开启评论邮箱提醒\">\n              <NSwitch\n                value={configs.value.mailOptions.enable}\n                onUpdateValue={(e) =>\n                  void (configs.value.mailOptions.enable = e)\n                }\n              />\n            </NFormItem>\n            <NGrid cols={gridCols.value} xGap={12}>\n              <NFormItemGi span={1} label=\"发件邮箱 host\">\n                <NInput\n                  value={configs.value.mailOptions.options.host}\n                  onInput={(e) =>\n                    void (configs.value.mailOptions.options.host = e)\n                  }\n                />\n              </NFormItemGi>\n              <NFormItemGi span={1} label=\"发件邮箱端口\">\n                <NInputNumber\n                  value={configs.value.mailOptions.options.port}\n                  onChange={(e) =>\n                    void (configs.value.mailOptions.options.port = e ?? 465)\n                  }\n                />\n              </NFormItemGi>\n              <NFormItemGi span={1} label=\"发件邮箱地址\">\n                <NInput\n                  value={configs.value.mailOptions.user}\n                  onInput={(e) => void (configs.value.mailOptions.user = e)}\n                />\n              </NFormItemGi>\n              <NFormItemGi span={1} label=\"发件邮箱密码\">\n                <NInput\n                  type=\"password\"\n                  showPasswordToggle\n                  inputProps={{\n                    name: 'email-password',\n                    autocomplete: 'new-password',\n                    autocapitalize: 'off',\n                    autocorrect: 'off',\n                  }}\n                  value={configs.value.mailOptions.pass}\n                  onInput={(e) => void (configs.value.mailOptions.pass = e)}\n                />\n              </NFormItemGi>\n            </NGrid>\n          </NForm>\n        </NCollapseItem>\n\n        {/* <NCollapseItem name=\"img_bed\" title=\"图床设定\">\n          <NForm {...formProps}>\n            <NText>\n              TODO\n            </NText>\n          </NForm>\n        </NCollapseItem> */}\n\n        <NCollapseItem name=\"backup\" title=\"备份\">\n          <NForm {...formProps}>\n            <NFormItem label=\"开启备份\">\n              <NSpace vertical>\n                <NSwitch\n                  value={configs.value.backupOptions.enable}\n                  onUpdateValue={(e) =>\n                    void (configs.value.backupOptions.enable = e)\n                  }\n                />\n                <NText class=\"text-xs\" depth={3}>\n                  仅支持备份到 COS\n                </NText>\n              </NSpace>\n            </NFormItem>\n\n            <NFormItem label=\"地域 Region\">\n              <NInput\n                {...autosizeableProps}\n                value={configs.value.backupOptions.region}\n                onInput={(e) => void (configs.value.backupOptions.region = e)}\n              />\n            </NFormItem>\n            <NFormItem label=\"SecretId\">\n              <NInput\n                {...autosizeableProps}\n                value={configs.value.backupOptions.secretId}\n                onInput={(e) => void (configs.value.backupOptions.secretId = e)}\n              />\n            </NFormItem>\n            <NFormItem label=\"SecretKey\">\n              <NInput\n                {...autosizeableProps}\n                type=\"password\"\n                inputProps={{\n                  name: 'secret-key-password',\n                  autocomplete: 'new-password',\n                  autocapitalize: 'off',\n                  autocorrect: 'off',\n                }}\n                showPasswordToggle\n                value={configs.value.backupOptions.secretKey}\n                onInput={(e) =>\n                  void (configs.value.backupOptions.secretKey = e)\n                }\n              />\n            </NFormItem>\n          </NForm>\n        </NCollapseItem>\n\n        <NCollapseItem name=\"baidu_push\" title=\"百度推送\">\n          <NForm {...formProps}>\n            <NFormItem label=\"开启推送\">\n              <NSwitch\n                value={configs.value.baiduSearchOptions.enable}\n                onUpdateValue={(e) =>\n                  void (configs.value.baiduSearchOptions.enable = e)\n                }\n              />\n            </NFormItem>\n            <NFormItem label=\"Token\" path=\"baidu_push\">\n              <NInput\n                {...autosizeableProps}\n                showPasswordToggle\n                type=\"password\"\n                inputProps={{\n                  name: 'baidu-push-password',\n                  autocomplete: 'new-password',\n                  autocapitalize: 'off',\n                  autocorrect: 'off',\n                }}\n                disabled={!configs.value.baiduSearchOptions.enable}\n                value={configs.value.baiduSearchOptions.token}\n                onUpdateValue={(e) =>\n                  void (configs.value.baiduSearchOptions.token = e)\n                }\n              />\n            </NFormItem>\n          </NForm>\n        </NCollapseItem>\n\n        <NCollapseItem name=\"algolia\" title=\"Algolia Search\">\n          <NForm {...formProps}>\n            <NFormItem label=\"开启 Algolia Search\">\n              <NSwitch\n                value={configs.value.algoliaSearchOptions.enable}\n                onUpdateValue={(e) =>\n                  void (configs.value.algoliaSearchOptions.enable = e)\n                }\n              />\n            </NFormItem>\n            <NFormItem label=\"AppId\">\n              <NInput\n                {...autosizeableProps}\n                disabled={!configs.value.algoliaSearchOptions.enable}\n                value={configs.value.algoliaSearchOptions.appId}\n                onInput={(e) =>\n                  void (configs.value.algoliaSearchOptions.appId = e)\n                }\n              />\n            </NFormItem>\n            <NFormItem label=\"apiKey\">\n              <NInput\n                {...autosizeableProps}\n                type=\"password\"\n                disabled={!configs.value.algoliaSearchOptions.enable}\n                value={configs.value.algoliaSearchOptions.apiKey}\n                onInput={(e) =>\n                  void (configs.value.algoliaSearchOptions.apiKey = e)\n                }\n              />\n            </NFormItem>\n            <NFormItem label=\"indexName\">\n              <NInput\n                {...autosizeableProps}\n                disabled={!configs.value.algoliaSearchOptions.enable}\n                value={configs.value.algoliaSearchOptions.indexName}\n                onInput={(e) =>\n                  void (configs.value.algoliaSearchOptions.indexName = e)\n                }\n              />\n            </NFormItem>\n          </NForm>\n        </NCollapseItem>\n      </NCollapse>\n    </Fragment>\n  )\n})\n\nfunction mergeFullConfigs(configs: any): IConfig {\n  return merge<IConfig, IConfig>(\n    {\n      seo: { title: '', description: '', keywords: [] },\n      url: {\n        wsUrl: '',\n        adminUrl: '',\n        serverUrl: '',\n        webUrl: '',\n      },\n      imageBed: {\n        customUrl: '',\n        repo: '',\n        token: '',\n        type: 'github',\n      },\n      mailOptions: {\n        user: '',\n        pass: '',\n        options: { host: '', port: 465 },\n        enable: false,\n      },\n      commentOptions: {\n        antiSpam: false,\n        spamKeywords: [],\n        blockIps: [],\n        disableNoChinese: false,\n      },\n      backupOptions: {\n        enable: false,\n        secretId: '',\n        secretKey: '',\n        bucket: '',\n        region: '',\n      },\n      baiduSearchOptions: {\n        enable: false,\n        token: '',\n      },\n      algoliaSearchOptions: {\n        enable: false,\n      },\n    },\n    configs,\n  )\n}\n","import Plus from '@vicons/fa/es/Plus'\nimport { Icon } from '@vicons/utils'\nimport { RelativeTime } from 'components/time/relative-time'\nimport { useInjector } from 'hooks/use-deps-injection'\nimport { TokenModel } from 'models/token'\nimport {\n  NButton,\n  NCard,\n  NCollapse,\n  NCollapseItem,\n  NDataTable,\n  NDatePicker,\n  NForm,\n  NFormItem,\n  NInput,\n  NLayoutContent,\n  NModal,\n  NPopconfirm,\n  NSpace,\n  NSwitch,\n} from 'naive-ui'\nimport { RouteName } from 'router/name'\nimport { UIStore } from 'stores/ui'\nimport { parseDate, removeToken, RESTManager } from 'utils'\nimport { defineComponent, onBeforeMount, reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { autosizeableProps } from './system'\n\nexport const TabSecurity = defineComponent(() => {\n  return () => (\n    <Fragment>\n      <div class=\"pt-4\"></div>\n      <NCollapse defaultExpandedNames={['reset']} displayDirective=\"if\">\n        <NCollapseItem name=\"reset\" title=\"修改密码\">\n          <ResetPass />\n        </NCollapseItem>\n\n        <NCollapseItem name=\"token\" title=\"API Token\">\n          <ApiToken />\n        </NCollapseItem>\n      </NCollapse>\n    </Fragment>\n  )\n})\n\nconst ApiToken = defineComponent(() => {\n  const tokens = ref([] as TokenModel[])\n\n  const defaultModel = () => ({\n    name: '',\n    expired: false,\n    expiredTime: new Date(),\n  })\n  const dataModel = reactive(defaultModel())\n  const fetchToken = async () => {\n    const { data } = (await RESTManager.api.auth.token.get()) as any\n    tokens.value = data\n  }\n\n  onBeforeMount(() => {\n    fetchToken()\n  })\n  const newTokenDialogShow = ref(false)\n  const newToken = async () => {\n    const payload = {\n      name: dataModel.name,\n      expired: dataModel.expired\n        ? dataModel.expiredTime.toISOString()\n        : undefined,\n    }\n\n    const response = (await RESTManager.api.auth.token.post({\n      data: payload,\n    })) as TokenModel\n\n    await navigator.clipboard.writeText(response.token)\n\n    newTokenDialogShow.value = false\n    const n = defaultModel()\n    for (const key in n) {\n      dataModel[key] = n[key]\n    }\n    message.success('生成成功, Token 已复制, ' + response.token)\n    await fetchToken()\n    // Backend bug.\n    const index = tokens.value.findIndex((i) => i.name === payload.name)\n    if (index !== -1) {\n      tokens.value[index].token = response.token\n    }\n  }\n\n  const onDeleteToken = async (id) => {\n    await RESTManager.api.auth.token.delete({ params: { id } })\n    message.success('删除成功')\n    const index = tokens.value.findIndex((i) => i.id === id)\n    if (index != -1) {\n      tokens.value.splice(index, 1)\n    }\n  }\n  const uiStore = useInjector(UIStore)\n  return () => (\n    <NLayoutContent class=\"!overflow-visible\">\n      <NModal\n        show={newTokenDialogShow.value}\n        onUpdateShow={(e) => void (newTokenDialogShow.value = e)}\n      >\n        <NCard bordered={false} title=\"创建 Token\" class=\"max-w-full w-[500px]\">\n          <NForm>\n            <NFormItem label=\"名称\" required>\n              <NInput\n                value={dataModel.name}\n                onInput={(e) => void (dataModel.name = e)}\n              ></NInput>\n            </NFormItem>\n\n            <NFormItem label=\"是否过期\">\n              <NSwitch\n                value={dataModel.expired}\n                onUpdateValue={(e) => void (dataModel.expired = e)}\n              ></NSwitch>\n            </NFormItem>\n\n            <NFormItem label=\"过期时间\">\n              <NDatePicker\n                disabled={!dataModel.expired}\n                // @ts-expect-error\n                value={dataModel.expiredTime}\n                type=\"datetime\"\n                onUpdateValue={(e) =>\n                  void (dataModel.expiredTime = new Date(e))\n                }\n              ></NDatePicker>\n            </NFormItem>\n          </NForm>\n          <NSpace>\n            <NButton\n              round\n              onClick={() => void (newTokenDialogShow.value = false)}\n            >\n              取消\n            </NButton>\n            <NButton round type=\"primary\" onClick={newToken}>\n              确定\n            </NButton>\n          </NSpace>\n        </NCard>\n      </NModal>\n\n      <NButton\n        class=\"absolute right-0 top-[-3rem]\"\n        round\n        type=\"primary\"\n        onClick={() => {\n          newTokenDialogShow.value = true\n        }}\n      >\n        <Icon>\n          <Plus />\n        </Icon>\n        <span class=\"ml-2\">新增</span>\n      </NButton>\n      <NDataTable\n        scrollX={Math.max(\n          800,\n          uiStore.contentWidth.value - uiStore.contentInsetWidth.value,\n        )}\n        remote\n        bordered={false}\n        data={tokens.value}\n        columns={[\n          { key: 'name', title: '名称' },\n          {\n            key: 'token',\n            title: 'Token',\n            render({ token }) {\n              return token ?? '*'.repeat(40)\n            },\n          },\n          {\n            title: '创建时间',\n            key: 'created',\n            render({ created }) {\n              return <RelativeTime time={created} />\n            },\n          },\n          {\n            title: '过期时间',\n            key: 'expired',\n            render({ expired }) {\n              return parseDate(expired, 'yyyy年M月d日 HH:mm:ss')\n            },\n          },\n          {\n            title: '操作',\n            key: 'id',\n            render({ id, name }) {\n              return (\n                <NSpace>\n                  <NPopconfirm\n                    positiveText={'取消'}\n                    negativeText=\"删除\"\n                    onNegativeClick={() => {\n                      onDeleteToken(id)\n                    }}\n                  >\n                    {{\n                      trigger: () => (\n                        <NButton text type=\"error\">\n                          删除\n                        </NButton>\n                      ),\n\n                      default: () => (\n                        <span style={{ maxWidth: '12rem' }}>\n                          确定要删除 Token \"{name}\"?\n                        </span>\n                      ),\n                    }}\n                  </NPopconfirm>\n                </NSpace>\n              )\n            },\n          },\n        ]}\n      ></NDataTable>\n    </NLayoutContent>\n  )\n})\nconst ResetPass = defineComponent(() => {\n  const resetPassword = reactive({\n    password: '',\n    reenteredPassword: '',\n  })\n  const formRef = ref<typeof NForm>()\n  const router = useRouter()\n  const reset = async () => {\n    if (!formRef.value) {\n      return\n    }\n\n    formRef.value.validate(async (err) => {\n      if (!err) {\n        await RESTManager.api.master.patch({\n          data: {\n            password: resetPassword.password,\n          },\n        })\n        message.success('更改成功')\n        removeToken()\n        router.push({ name: RouteName.Login })\n      } else {\n        console.log(err)\n      }\n    })\n  }\n\n  function validatePasswordSame(rule, value) {\n    console.log(rule)\n\n    return value === resetPassword.password\n  }\n\n  return () => (\n    <NForm\n      class=\"max-w-[300px]\"\n      ref={formRef}\n      model={resetPassword}\n      rules={{\n        password: [\n          {\n            required: true,\n            message: '请输入密码',\n          },\n        ],\n        reenteredPassword: [\n          {\n            required: true,\n            message: '请再次输入密码',\n            trigger: ['input', 'blur'],\n          },\n          {\n            validator: validatePasswordSame,\n            message: '两次密码输入不一致',\n            trigger: ['blur', 'password-input'],\n          },\n        ],\n      }}\n    >\n      <NFormItem label=\"新密码\" required path=\"password\">\n        <NInput\n          {...autosizeableProps}\n          value={resetPassword.password}\n          onInput={(e) => void (resetPassword.password = e)}\n          type=\"password\"\n        />\n      </NFormItem>\n      <NFormItem label=\"重复密码\" required path=\"reenteredPassword\">\n        <NInput\n          {...autosizeableProps}\n          value={resetPassword.reenteredPassword}\n          onInput={(e) => void (resetPassword.reenteredPassword = e)}\n          type=\"password\"\n        />\n      </NFormItem>\n      <div class=\"w-full text-right\">\n        <NButton onClick={reset} type=\"primary\" round>\n          保存\n        </NButton>\n      </div>\n    </NForm>\n  )\n})\n","import Avatar from 'components/avatar'\nimport { IpInfoPopover } from 'components/ip-info'\nimport { RelativeTime } from 'components/time/relative-time'\nimport { omit, isEmpty } from 'lodash-es'\nimport { UserModel } from 'models/user'\nimport {\n  NButton,\n  NForm,\n  NFormItem,\n  NGi,\n  NGrid,\n  NInput,\n  NText,\n  useMessage,\n} from 'naive-ui'\nimport { RESTManager, shallowDiff } from 'utils'\nimport { defineComponent, ref, onMounted, computed } from 'vue'\nimport styles from './user.module.css'\n\nexport const TabUser = defineComponent(() => {\n  const data = ref({} as UserModel)\n  let origin: UserModel\n\n  async function fetchMaster() {\n    const response = (await RESTManager.api.master.get()) as any\n    data.value = omit(response, ['ok']) as any\n    origin = { ...response }\n  }\n\n  onMounted(async () => {\n    await fetchMaster()\n  })\n  const message = useMessage()\n  const diff = computed(() => shallowDiff(origin, data.value))\n  const handleSave = async () => {\n    await RESTManager.api.master.patch({\n      data: diff.value,\n    })\n    message.success('保存成功~')\n    await fetchMaster()\n  }\n\n  return () => (\n    <Fragment>\n      <NGrid\n        cols={'1 400:1 600:2'}\n        class={styles['tab-user']}\n        xGap={20}\n        yGap={20}\n      >\n        <NGi>\n          <NForm class=\"flex flex-col justify-center items-center \">\n            <NFormItem>\n              <div class={styles['avatar']}>\n                <Avatar src={data.value.avatar} size={200}></Avatar>\n              </div>\n            </NFormItem>\n\n            <NFormItem label=\"上次登陆时间\" class=\"!mt-4\">\n              <div class=\"text-center w-full\">\n                <NText>\n                  {data.value.lastLoginTime ? (\n                    <RelativeTime\n                      time={data.value.lastLoginTime}\n                    ></RelativeTime>\n                  ) : (\n                    'N/A'\n                  )}\n                </NText>\n              </div>\n            </NFormItem>\n\n            <NFormItem label=\"上次登陆地址\">\n              <div class=\"text-center w-full\">\n                {data.value.lastLoginIp ? (\n                  <IpInfoPopover\n                    trigger={'hover'}\n                    ip={data.value.lastLoginIp}\n                    triggerEl={\n                      <NText class=\"cursor-pointer\">\n                        {data.value.lastLoginIp}\n                      </NText>\n                    }\n                  ></IpInfoPopover>\n                ) : (\n                  'N/A'\n                )}\n              </div>\n            </NFormItem>\n\n            <NFormItem>\n              <NButton\n                round\n                class=\"-mt-14\"\n                type=\"primary\"\n                onClick={handleSave}\n                disabled={isEmpty(diff.value)}\n              >\n                保存\n              </NButton>\n            </NFormItem>\n          </NForm>\n        </NGi>\n\n        <NGi>\n          <NForm>\n            <NFormItem label=\"主人名 (username)\">\n              <NInput\n                value={data.value.username}\n                onInput={(e) => {\n                  data.value.username = e\n                }}\n              />\n            </NFormItem>\n\n            <NFormItem label=\"主人昵称 (name)\">\n              <NInput\n                value={data.value.name}\n                onInput={(e) => {\n                  data.value.name = e\n                }}\n              />\n            </NFormItem>\n\n            <NFormItem label=\"主人邮箱 (mail)\">\n              <NInput\n                value={data.value.mail}\n                onInput={(e) => {\n                  data.value.mail = e\n                }}\n              />\n            </NFormItem>\n\n            <NFormItem label=\"个人首页\">\n              <NInput\n                value={data.value.url}\n                onInput={(e) => {\n                  data.value.url = e\n                }}\n              />\n            </NFormItem>\n            <NFormItem label=\"头像\">\n              <NInput\n                value={data.value.avatar}\n                onInput={(e) => {\n                  data.value.avatar = e\n                }}\n              />\n            </NFormItem>\n\n            <NFormItem label=\"个人介绍\">\n              <NInput\n                value={data.value.introduce}\n                onInput={(e) => {\n                  data.value.introduce = e\n                }}\n              />\n            </NFormItem>\n          </NForm>\n        </NGi>\n      </NGrid>\n    </Fragment>\n  )\n})\n","import { ContentLayout } from 'layouts/content'\nimport { NTabPane, NTabs } from 'naive-ui'\nimport { defineComponent, inject, provide, Ref, ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { TabSecurity } from './tabs/security'\nimport { TabSystem } from './tabs/system'\nimport { TabUser } from './tabs/user'\n\nenum SettingTab {\n  User = 'user',\n  System = 'system',\n  Security = 'security',\n}\nexport default defineComponent({\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const tabValue = ref(route.params.type as string)\n\n    watch(\n      () => route.params.type,\n      (n) => {\n        if (!n) {\n          return\n        }\n        tabValue.value = n as any\n      },\n    )\n    const headerActionsEl = ref<null | JSX.Element>(null)\n    return () => (\n      <ContentLayout actionsElement={headerActionsEl.value}>\n        <NTabs\n          value={tabValue.value}\n          onUpdateValue={(e) => {\n            router.replace({ ...route, params: { ...route.params, type: e } })\n          }}\n        >\n          <NTabPane tab=\"用户\" name={SettingTab.User}>\n            <TabUser />\n          </NTabPane>\n\n          <NTabPane tab=\"系统\" name={SettingTab.System}>\n            <TabSystem />\n          </NTabPane>\n\n          <NTabPane tab=\"安全\" name={SettingTab.Security}>\n            <TabSecurity />\n          </NTabPane>\n        </NTabs>\n      </ContentLayout>\n    )\n  },\n})\n"],"names":["Object","defineProperty","CheckCircleOutlined","value","vue_1","require$$0","_hoisted_1","xmlns","viewBox","_hoisted_2","createVNode","d","fill","_hoisted_3","defineComponent","name","render","_ctx","_cache","openBlock","createBlock","NFormBaseProps","class","labelPlacement","labelAlign","labelWidth","autocomplete","autosizeableProps","autosize","clearable","style","TabSystem","setHeaderButton","useLayout","HeaderActionButton","disabled","onClick","save","icon","originConfigs","configs","ref","mergeFullConfigs","diff","isEmpty","entries","key","RESTManager","api","options","patch","data","keywords","seo","fetchConfig","success","n","deepDiff","toRaw","deep","canSave","async","response","get","omit","cloneDeep","expandedNames","uiStore","useInjector","UIStore","gridCols","computed","viewport","mobile","formProps","reactive","immediate","Fragment","NCollapse","accordion","displayDirective","onUpdateExpandedNames","e","NCollapseItem","title","NForm","NGrid","cols","xGap","NFormItemGi","span","label","NInput","url","webUrl","onInput","serverUrl","adminUrl","wsUrl","NFormItem","description","NDynamicTags","round","type","onChange","NSwitch","commentOptions","antiSpam","onUpdateValue","spamKeywords","blockIps","disableNoChinese","mailOptions","enable","host","NInputNumber","port","user","showPasswordToggle","inputProps","autocapitalize","autocorrect","pass","NSpace","vertical","backupOptions","NText","depth","region","secretId","secretKey","baiduSearchOptions","path","token","algoliaSearchOptions","appId","apiKey","indexName","merge","imageBed","customUrl","repo","bucket","TabSecurity","defaultExpandedNames","ResetPass","ApiToken","tokens","defaultModel","expired","expiredTime","Date","dataModel","fetchToken","auth","newTokenDialogShow","newToken","payload","toISOString","post","navigator","clipboard","writeText","index2","findIndex","i","NLayoutContent","NModal","show","onUpdateShow","NCard","bordered","required","NDatePicker","NButton","Icon","Plus","NDataTable","scrollX","Math","max","contentWidth","contentInsetWidth","remote","columns","repeat","created","RelativeTime","time","parseDate","id","NPopconfirm","positiveText","negativeText","onNegativeClick","delete","params","splice","trigger","text","default","maxWidth","resetPassword","password","reenteredPassword","formRef","router","useRouter","reset","validate","err","log","master","push","RouteName","Login","rule","model","rules","message","validator","validatePasswordSame","TabUser","origin","fetchMaster","message2","useMessage","shallowDiff","handleSave","styles","yGap","NGi","Avatar","src","avatar","size","lastLoginTime","lastLoginIp","IpInfoPopover","ip","triggerEl","username","mail","introduce","SettingTab","SettingTab2","setup","route","useRoute","tabValue","headerActionsEl","ContentLayout","actionsElement","NTabs","replace","NTabPane","tab","User","System","Security"],"mappings":"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"}