import{d as a,r as e,o as s,B as t,u as o,ac as n,ad as r,ae as l,b as u,e as d,f as i,n as p,ag as c,ah as m,ai as g,af as v}from"./vendor-7845e367-8e1c0f5.js";import{_ as w,P as f,u as h,j as b,R as y}from"./index-8e1c0f5.js";const j=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg",k=a({components:{ParallaxButtonVue:f},setup(){const a=e(!1),{updateToken:n,fetchUser:r}=h(b);s((()=>{const e=new Image;e.src=j,e.onload=e=>{a.value=!0}}));const l=t(),u=e(""),d=e("");o();return{bgUrl:j,loaded:a,password:u,handleRegister:async a=>{null==a||a.stopPropagation();try{const a=await y.api.master.register.post({data:{username:d.value,password:u.value}});n(a.token),l.success("欧尼酱!"),localStorage.setItem("to-setting","true")}catch(e){l.error("出了点小问题, 不要慌"),l.error(e.message)}},username:d}}}),x=k;n("data-v-2e927532");const I={class:"wrapper"},R={class:"input-wrap"},U={class:"input-wrap"};r();var _=w(x,[["render",function(a,e,s,t,o,n){const r=l("ParallaxButtonVue");return u(),d("div",null,[i("div",{class:"bg transition-opacity duration-700",style:p({backgroundImage:`url(${a.bgUrl})`,opacity:a.loaded?1:0})},null,4),i("div",I,[i("form",{action:"#",onSubmit:e[2]||(e[2]=c(((...e)=>a.handleRegister&&a.handleRegister(...e)),["prevent"]))},[i("div",R,[m(i("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>a.username=e),autofocus:"",placeholder:"这里填上你的用户名"},null,512),[[g,a.username]])]),i("div",U,[m(i("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.password=e),type:"password",placeholder:"这里填上密码哦"},null,512),[[g,a.password]])]),v(r,{title:"注册",class:"p-button-raised p-button-rounded",onClick:c(a.handleRegister,["prevent","stop"])},null,8,["onClick"])],32)])])}],["__scopeId","data-v-2e927532"]]);export{k as InitView,_ as default};
//# sourceMappingURL=index-e4c48a50-8e1c0f5.js.map
