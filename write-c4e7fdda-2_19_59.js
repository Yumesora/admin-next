import{E as a,M as t,P as e,S as s}from"./parse-button-c0597c1d-2_19_59.js";import{T as l}from"./TelegramPlane-741a88f6-2_19_59.js";import{d as o,aa as r,aP as n,k as i,o as u,r as c,B as d,l as m,h as p,aX as g,aY as f,aZ as h,a_ as _,b7 as v,F as b,I as w,b2 as j,b1 as y}from"./vendor-a3bf3ad0-2_19_59.js";import{H as x}from"./rounded-button-00a9564c-2_19_59.js";import"./monaco-2cb49779-2_19_59.js";import{U as C}from"./underline-input-1dcccad1-2_19_59.js";import{R as P,B as k,a as B,e as E}from"./index-2_19_59.js";import{u as S}from"./use-parse-payload-770fb8f3-2_19_59.js";import"./vue.runtime.esm-bundler-dad87c3e-2_19_59.js";const T=o((()=>{const o=r(),T=n({text:"",title:"",order:0,slug:"",subtitle:""}),U=i((()=>o.query.id));u((async()=>{const a=U.value;if(a&&"string"==typeof a){(a=>{S(T)(a)})((await P.api.pages(a).get({})).data)}}));const q=c(!1),z=d(),F=m(),H=async()=>{const a=()=>{try{if(!T.title||0==T.title.trim().length)throw"标题为空";if(!T.slug)throw"路径为空";return{...y(T),title:T.title.trim(),slug:T.slug.trim()}}catch(a){throw z.error(a),a}};if(U.value){if(!j(U.value))return;const t=U.value;await P.api.pages(t).put({data:a()}),z.success("修改成功")}else await P.api.pages.post({data:a()}),z.success("发布成功");F.push({name:E.ListPage,hash:"|publish"})};return()=>p(B,{actionsElement:p(b,null,p(e,{data:T}),p(x,{icon:p(l,null),onClick:H})),footerButtonElement:p(b,null,p("button",{onClick:()=>{q.value=!0}},p(w,null,p(s,null))))},p(t,{class:"mt-3 relative z-10",label:"与你有个好心情~",value:T.title,onChange:a=>{T.title=a}}),p("div",{class:"text-gray-500 py-3"},p("label",null,`${k}/`),p(C,{value:T.slug,onChange:a=>{T.slug=a}})),p(a,{loading:!(!U.value||T.title),onChange:a=>{T.text=a},text:T.text}),p(g,{show:q.value,width:450,style:{maxWidth:"90vw"},placement:"right",onUpdateShow:a=>{q.value=a}},p(f,{title:"文章设定"},p(h,null,p(_,{label:"页面顺序"},p(v,{placeholder:"",value:T.order,onChange:a=>{T.order=null!=a?a:0}}))))))}));export default T;
//# sourceMappingURL=write-c4e7fdda-2_19_59.js.map
