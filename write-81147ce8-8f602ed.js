import{E as a,M as e,P as t,S as s}from"./parse-button-3c25ee05-8f602ed.js";import{T as l}from"./TelegramPlane-d43fdedb-8f602ed.js";import{d as o,ab as r,aR as n,k as i,o as u,r as d,B as f,l as m,h as p,aZ as c,a_ as g,a$ as h,b0 as b,b8 as v,F as w,I as j,b4 as y,b3 as x}from"./vendor-42f259f3-8f602ed.js";import{H as C}from"./rounded-button-79e5eb1e-8f602ed.js";import"./monaco-7a0e4c7d-8f602ed.js";import{U as k}from"./underline-input-9faf8d54-8f602ed.js";import{R as B,B as E,a as P,d as R}from"./index-8f602ed.js";import{u as S}from"./use-parse-payload-ae36d116-8f602ed.js";import"./vue.runtime.esm-bundler-a81a40f8-8f602ed.js";const T=o((()=>{const o=r(),T=n({text:"",title:"",order:0,slug:"",subtitle:""}),U=i((()=>o.query.id));u((async()=>{const a=U.value;if(a&&"string"==typeof a){(a=>{S(T)(a)})((await B.api.pages(a).get({})).data)}}));const $=d(!1),q=f(),z=m(),F=async()=>{const a=()=>{try{if(!T.title||0==T.title.trim().length)throw"标题为空";if(!T.slug)throw"路径为空";return{...x(T),title:T.title.trim(),slug:T.slug.trim()}}catch(a){throw q.error(a),a}};if(U.value){if(!y(U.value))return;const e=U.value;await B.api.pages(e).put({data:a()}),q.success("修改成功")}else await B.api.pages.post({data:a()}),q.success("发布成功");z.push({name:R.ListPage,hash:"|publish"})};return()=>p(P,{actionsElement:p(w,null,p(t,{data:T}),p(C,{icon:p(l,null),onClick:F})),footerButtonElement:p(w,null,p("button",{onClick:()=>{$.value=!0}},p(j,null,p(s,null))))},p(e,{class:"mt-3 relative z-10",label:"与你有个好心情~",value:T.title,onChange:a=>{T.title=a}}),p("div",{class:"text-gray-500 py-3"},p("label",null,`${E}/`),p(k,{value:T.slug,onChange:a=>{T.slug=a}})),p(a,{loading:!(!U.value||T.title),onChange:a=>{T.text=a},text:T.text}),p(c,{show:$.value,width:450,style:{maxWidth:"90vw"},placement:"right",onUpdateShow:a=>{$.value=a}},p(g,{title:"文章设定"},p(h,null,p(b,{label:"页面顺序"},p(v,{placeholder:"",value:T.order,onChange:a=>{T.order=null!=a?a:0}}))))))}));export{T as default};
//# sourceMappingURL=write-81147ce8-8f602ed.js.map
