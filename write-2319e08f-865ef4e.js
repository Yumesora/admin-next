import{E as e,M as a,P as t,S as s}from"./parse-button-6e05dd4a-865ef4e.js";import{T as l}from"./TelegramPlane-0e1244c6-865ef4e.js";import{d as o,ac as r,aS as n,k as i,o as u,r as d,C as m,l as p,h as f,a_ as c,a$ as g,b0 as h,b1 as b,ba as v,F as w,I as j,b5 as y,b4 as x}from"./vendor-6aadbed1-865ef4e.js";import{H as C}from"./rounded-button-7fa03d0d-865ef4e.js";import"./monaco-5b0e6577-865ef4e.js";import{U as k}from"./underline-input-e6d54fa3-865ef4e.js";import{R as E,B as P,a as S,e as B}from"./index-865ef4e.js";import{u as T}from"./use-parse-payload-13278ffd-865ef4e.js";import"./vue.runtime.esm-bundler-bb64a4d2-865ef4e.js";const U=o((()=>{const o=r(),U=n({text:"",title:"",order:0,slug:"",subtitle:""}),$=i((()=>o.query.id));u((async()=>{const e=$.value;if(e&&"string"==typeof e){(e=>{T(U)(e)})((await E.api.pages(e).get({})).data)}}));const q=d(!1),z=m(),F=p(),H=async()=>{const e=()=>{try{if(!U.title||0==U.title.trim().length)throw"标题为空";if(!U.slug)throw"路径为空";return{...x(U),title:U.title.trim(),slug:U.slug.trim()}}catch(e){throw z.error(e),e}};if($.value){if(!y($.value))return;const a=$.value;await E.api.pages(a).put({data:e()}),z.success("修改成功")}else await E.api.pages.post({data:e()}),z.success("发布成功");F.push({name:B.ListPage,hash:"|publish"})};return()=>f(S,{actionsElement:f(w,null,f(t,{data:U}),f(C,{icon:f(l,null),onClick:H})),footerButtonElement:f(w,null,f("button",{onClick:()=>{q.value=!0}},f(j,null,f(s,null))))},f(a,{class:"mt-3 relative z-10",label:"与你有个好心情~",value:U.title,onChange:e=>{U.title=e}}),f("div",{class:"text-gray-500 py-3"},f("label",null,`${P}/`),f(k,{value:U.slug,onChange:e=>{U.slug=e}})),f(e,{loading:!(!$.value||U.title),onChange:e=>{U.text=e},text:U.text}),f(c,{show:q.value,width:450,style:{maxWidth:"90vw"},placement:"right",onUpdateShow:e=>{q.value=e}},f(g,{title:"文章设定"},f(h,null,f(b,{label:"页面顺序"},f(v,{placeholder:"",value:U.order,onChange:e=>{U.order=null!=e?e:0}}))))))}));export{U as default};
//# sourceMappingURL=write-2319e08f-865ef4e.js.map
