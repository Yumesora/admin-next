import{d as a,r as e,o as s,G as t,u as o,af as n,ag as r,ah as l,b as d,e as u,f as i,n as p,aj as c,ak as m,al as g,ai as v}from"./vendor-836ee71d-040da50.js";import{k as w,P as h,u as f,l as b,R as k}from"./index-040da50.js";const y=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg",j=a({components:{ParallaxButtonVue:h},setup(){const a=e(!1),{updateToken:n,fetchUser:r}=f(b);s((()=>{const e=new Image;e.src=y,e.onload=e=>{a.value=!0}}));const l=t(),d=e(""),u=e("");o();return{bgUrl:y,loaded:a,password:d,handleRegister:async a=>{null==a||a.stopPropagation();try{const a=await k.api.master.register.post({data:{username:u.value,password:d.value}});n(a.token),l.success("欧尼酱!"),localStorage.setItem("to-setting","true"),location.reload()}catch(e){l.error("出了点小问题, 不要慌"),l.error(e.message)}},username:u}}}),x=j;n("data-v-47865a10");const I={class:"wrapper"},R={class:"input-wrap"},U={class:"input-wrap"};r();var P=w(x,[["render",function(a,e,s,t,o,n){const r=l("ParallaxButtonVue");return d(),u("div",null,[i("div",{class:"bg transition-opacity duration-700",style:p({backgroundImage:`url(${a.bgUrl})`,opacity:a.loaded?1:0})},null,4),i("div",I,[i("form",{action:"#",onSubmit:e[2]||(e[2]=c(((...e)=>a.handleRegister&&a.handleRegister(...e)),["prevent"]))},[i("div",R,[m(i("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>a.username=e),autofocus:"",placeholder:"这里填上你的用户名"},null,512),[[g,a.username]])]),i("div",U,[m(i("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.password=e),type:"password",placeholder:"这里填上密码哦"},null,512),[[g,a.password]])]),v(r,{title:"注册",class:"p-button-raised p-button-rounded",onClick:c(a.handleRegister,["prevent","stop"])},null,8,["onClick"])],32)])])}],["__scopeId","data-v-47865a10"]]);export{j as InitView,P as default};
