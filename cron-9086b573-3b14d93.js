import{T as e}from"./index-de7bd175-3b14d93.js";import{u as t}from"./use-table-21542458-3b14d93.js";import{R as a,a as s}from"./index-3b14d93.js";import{t as i}from"./index-f552bf59-3b14d93.js";import{d as n,o,h as r,v as l,G as m,aW as d,J as c}from"./vendor-f325c6c0-3b14d93.js";var u=n({setup(){const{data:n,fetchDataFn:u,loading:p}=t((e=>async()=>{const t=await a.api.health.cron.get();e.value=Array.from(Object.values(t.data).map((e=>({...e,_name:e.name,name:i(e.name)}))))}));o((async()=>{await u()}));return()=>r(s,null,r(e,{noPagination:!0,data:n,loading:p.value,nTableProps:{maxHeight:"calc(100vh - 17rem)"},maxWidth:500,columns:[{title:"任务",key:"name",ellipsis:{tooltip:!0},width:150},{title:"描述",key:"description",width:250,ellipsis:{tooltip:!0}},{title:"状态",key:"status"},{title:"下次执行",key:"",render(e){const t=e.nextDate;return t?l(new Date(t),"MM/dd/yyyy hh:mm:ss"):"N/A"}},{title:"操作",key:"",render:e=>r(m,null,r(d,{onPositiveClick:()=>{(async(e,t)=>{await a.api.health.cron.run(e).post();let s=setTimeout((function i(){a.api.health.cron.task(e).get().then((e=>{"fulfill"===e.status?(message.success(`${t} 执行完成`),s=clearTimeout(s)):"reject"===e.status?(message.error(`${t} 执行失败, `+e.message),s=clearTimeout(s)):s=setTimeout(i,1e3)}))}),1e3)})(e._name,e.name)}},{trigger:()=>r(c,{size:"tiny",text:!0,type:"success"},"执行"),default:()=>r("span",{style:{maxWidth:"12rem"}},"确定要执行?")}))}]}))}});export{u as default};
//# sourceMappingURL=cron-9086b573-3b14d93.js.map
