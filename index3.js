import{u as O,U}from"./index.js";import{d as S,u as k,ag as q,r as y,aU as P,w as j,aY as x,h as C,aZ as B}from"./vendor.js";var F={"table-row":"_table-row_1brqz_3"};const W=F["table-row"],z=S({props:{data:{type:Object,required:!0},noPagination:{type:Boolean,default:!1},pager:{type:Object,required:!1},onUpdateCheckedRowKeys:{type:Function,default:()=>{}},onUpdateSorter:{type:Function,default:()=>{}},onFetchData:{type:Function,required:!1},columns:{type:Array,required:!0},nTableProps:{type:Object,default:{}},maxWidth:{type:Number},loading:{type:Boolean,default:!1},checkedRowKey:{type:String,default:"id"}},setup(d,T){const{data:l,noPagination:h=!1,pager:r,onUpdateCheckedRowKeys:v,onUpdateSorter:g,nTableProps:w,columns:u,onFetchData:i,checkedRowKey:b="id",maxWidth:m=1200}=d,R=k(),c=q(),p=y([]),n=P({sortBy:"",sortOrder:0}),o=y(!0),K=j(()=>l.value,e=>{o.value=!1,K()});x((e,f,a)=>{o.value=!0,a(),o.value=!1});const s=O(U);return()=>C(B,{...w,loading:d.loading??o.value,remote:!0,scrollX:Math.max(s.contentInsetWidth.value,m),pagination:h?void 0:r&&{page:r.value.currentPage,pageSize:r.value.size,pageCount:r.value.totalPage,showQuickJumper:!0,pageSlot:s.viewport.value.mobile?s.contentInsetWidth.value<400?2:3:void 0,onChange:async e=>{R.push({query:{...c.query,page:e},path:c.path})}},bordered:!1,data:l.value,checkedRowKeys:p.value,rowKey:e=>e[b],onUpdateCheckedRowKeys:e=>{p.value=e,v?.(e)},onUpdateSorter:async e=>{if(!e)return;u.forEach(t=>{if("sortOrder"in t&&t.sortOrder!==void 0){if(!e){t.sortOrder=!1;return}t.key===e.columnKey?t.sortOrder=e.order:t.sortOrder=!1}});const{columnKey:f,order:a}=e;n.sortBy=a===!1?"":f.toString()||"",n.sortOrder=a?{descend:-1,ascend:1}[a]:1,g?.(n,e),i&&await i()},columns:u})}});export{z as T,W as t};
