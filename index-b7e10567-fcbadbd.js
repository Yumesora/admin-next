import{d as a,r as e,o as s,B as t,u as n,ac as o,ad as r,ae as d,b as l,e as u,f as i,n as p,ag as c,ah as m,ai as g,af as f}from"./vendor-c7057fff-fcbadbd.js";import{_ as v,P as w,u as b,j as h,R as y,d as j}from"./index-fcbadbd.js";const k=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg",x=a({components:{ParallaxButtonVue:w},setup(){const a=e(!1),{updateToken:o,fetchUser:r}=b(h);s((()=>{const e=new Image;e.src=k,e.onload=e=>{a.value=!0}}));const d=t(),l=e(""),u=e(""),i=n();return{bgUrl:k,loaded:a,password:l,handleRegister:async a=>{null==a||a.stopPropagation();try{const a=await y.api.master.register.post({data:{username:u.value,password:l.value}});o(a.token),d.success("欧尼酱!"),setTimeout((()=>{r().then((()=>{i.push({name:j.System})}))}),300)}catch(e){d.error("出了点小问题, 不要慌"),d.error(e.message)}},username:u}}}),R=x;o("data-v-2d98914a");const U={class:"wrapper"},_={class:"input-wrap"},B={class:"input-wrap"};r();var I=v(R,[["render",function(a,e,s,t,n,o){const r=d("ParallaxButtonVue");return l(),u("div",null,[i("div",{class:"bg transition-opacity duration-700",style:p({backgroundImage:`url(${a.bgUrl})`,opacity:a.loaded?1:0})},null,4),i("div",U,[i("form",{action:"#",onSubmit:e[2]||(e[2]=c(((...e)=>a.handleRegister&&a.handleRegister(...e)),["prevent"]))},[i("div",_,[m(i("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>a.username=e),autofocus:"",placeholder:"这里填上你的用户名"},null,512),[[g,a.username]])]),i("div",B,[m(i("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.password=e),type:"password",placeholder:"这里填上密码哦"},null,512),[[g,a.password]])]),f(r,{title:"注册",class:"p-button-raised p-button-rounded",onClick:c(a.handleRegister,["prevent","stop"])},null,8,["onClick"])],32)])])}],["__scopeId","data-v-2d98914a"]]);export{x as InitView,I as default};
//# sourceMappingURL=index-b7e10567-fcbadbd.js.map
