import{E as a,M as t,P as e,S as s}from"./parse-button-33f67bc7-fcbadbd.js";import{T as l}from"./TelegramPlane-b413053c-fcbadbd.js";import{d as o,ab as r,aT as n,l as i,o as u,r as d,B as c,u as b,h as f,a$ as m,b0 as p,b1 as g,b2 as h,ba as v,F as w,I as j,b6 as y,b5 as x}from"./vendor-c7057fff-fcbadbd.js";import{H as C}from"./rounded-button-c3c9daf1-fcbadbd.js";import"./monaco-9e291b95-fcbadbd.js";import{U as B}from"./underline-input-5e6ea3dc-fcbadbd.js";import{R as E,B as P,a as T,d as k}from"./index-fcbadbd.js";import{u as S}from"./use-parse-payload-b0407417-fcbadbd.js";import"./vue.runtime.esm-bundler-c90a3cb8-fcbadbd.js";const U=o((()=>{const o=r(),U=n({text:"",title:"",order:0,slug:"",subtitle:""}),$=i((()=>o.query.id));u((async()=>{const a=$.value;if(a&&"string"==typeof a){(a=>{S(U)(a)})((await E.api.pages(a).get({})).data)}}));const q=d(!1),z=c(),F=b(),H=async()=>{const a=()=>{try{if(!U.title||0==U.title.trim().length)throw"标题为空";if(!U.slug)throw"路径为空";return{...x(U),title:U.title.trim(),slug:U.slug.trim()}}catch(a){throw z.error(a),a}};if($.value){if(!y($.value))return;const t=$.value;await E.api.pages(t).put({data:a()}),z.success("修改成功")}else await E.api.pages.post({data:a()}),z.success("发布成功");F.push({name:k.ListPage,hash:"|publish"})};return()=>f(T,{actionsElement:f(w,null,f(e,{data:U}),f(C,{icon:f(l,null),onClick:H})),footerButtonElement:f(w,null,f("button",{onClick:()=>{q.value=!0}},f(j,null,f(s,null))))},f(t,{class:"mt-3 relative z-10",label:"与你有个好心情~",value:U.title,onChange:a=>{U.title=a}}),f("div",{class:"text-gray-500 py-3"},f("label",null,`${P}/`),f(B,{value:U.slug,onChange:a=>{U.slug=a}})),f(a,{loading:!(!$.value||U.title),onChange:a=>{U.text=a},text:U.text}),f(m,{show:q.value,width:450,style:{maxWidth:"90vw"},placement:"right",onUpdateShow:a=>{q.value=a}},f(p,{title:"文章设定"},f(g,null,f(h,{label:"页面顺序"},f(v,{placeholder:"",value:U.order,onChange:a=>{U.order=null!=a?a:0}}))))))}));export{U as default};
//# sourceMappingURL=write-aee7ee37-fcbadbd.js.map
