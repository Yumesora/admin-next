import{d as a,r as e,o as s,G as t,u as o,af as n,ag as r,ah as l,b as u,e as d,f as i,n as p,aj as c,ak as m,al as g,ai as v}from"./vendor-ec615c63-194e3b7.js";import{_ as w,P as b,u as h,k as f,R as k}from"./index-194e3b7.js";const y=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg",j=a({components:{ParallaxButtonVue:b},setup(){const a=e(!1),{updateToken:n,fetchUser:r}=h(f);s((()=>{const e=new Image;e.src=y,e.onload=e=>{a.value=!0}}));const l=t(),u=e(""),d=e("");o();return{bgUrl:y,loaded:a,password:u,handleRegister:async a=>{null==a||a.stopPropagation();try{const a=await k.api.master.register.post({data:{username:d.value,password:u.value}});n(a.token),l.success("欧尼酱!"),localStorage.setItem("to-setting","true"),location.reload()}catch(e){l.error("出了点小问题, 不要慌"),l.error(e.message)}},username:d}}}),x=j;n("data-v-47865a10");const I={class:"wrapper"},R={class:"input-wrap"},U={class:"input-wrap"};r();var _=w(x,[["render",function(a,e,s,t,o,n){const r=l("ParallaxButtonVue");return u(),d("div",null,[i("div",{class:"bg transition-opacity duration-700",style:p({backgroundImage:`url(${a.bgUrl})`,opacity:a.loaded?1:0})},null,4),i("div",I,[i("form",{action:"#",onSubmit:e[2]||(e[2]=c(((...e)=>a.handleRegister&&a.handleRegister(...e)),["prevent"]))},[i("div",R,[m(i("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>a.username=e),autofocus:"",placeholder:"这里填上你的用户名"},null,512),[[g,a.username]])]),i("div",U,[m(i("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.password=e),type:"password",placeholder:"这里填上密码哦"},null,512),[[g,a.password]])]),v(r,{title:"注册",class:"p-button-raised p-button-rounded",onClick:c(a.handleRegister,["prevent","stop"])},null,8,["onClick"])],32)])])}],["__scopeId","data-v-47865a10"]]);export{j as InitView,_ as default};
//# sourceMappingURL=index-f71e3723-194e3b7.js.map
