import{E as e,M as a,P as t,S as s}from"./parse-button-bd26874a-fbdec80.js";import{T as l}from"./TelegramPlane-8810f981-fbdec80.js";import{d as o,ae as r,aV as n,l as i,o as u,r as d,G as c,u as b,h as m,b0 as p,b1 as f,b2 as g,b3 as h,bb as v,F as w,I as j,b7 as y,b6 as x}from"./vendor-71d6e329-fbdec80.js";import{H as C}from"./rounded-button-9be4d263-fbdec80.js";import"./monaco-ccf6679e-fbdec80.js";import{U as E}from"./underline-input-1564c658-fbdec80.js";import{R as P,B as k,a as B,d as S}from"./index-fbdec80.js";import{u as T}from"./use-parse-payload-9db66dde-fbdec80.js";import"./vue.runtime.esm-bundler-8dc2921d-fbdec80.js";const U=o((()=>{const o=r(),U=n({text:"",title:"",order:0,slug:"",subtitle:""}),q=i((()=>o.query.id));u((async()=>{const e=q.value;if(e&&"string"==typeof e){(e=>{T(U)(e)})((await P.api.pages(e).get({})).data)}}));const z=d(!1),F=c(),G=b(),H=async()=>{const e=()=>{try{if(!U.title||0==U.title.trim().length)throw"标题为空";if(!U.slug)throw"路径为空";return{...x(U),title:U.title.trim(),slug:U.slug.trim()}}catch(e){throw F.error(e),e}};if(q.value){if(!y(q.value))return;const a=q.value;await P.api.pages(a).put({data:e()}),F.success("修改成功")}else await P.api.pages.post({data:e()}),F.success("发布成功");G.push({name:S.ListPage,hash:"|publish"})};return()=>m(B,{actionsElement:m(w,null,m(t,{data:U}),m(C,{icon:m(l,null),onClick:H})),footerButtonElement:m(w,null,m("button",{onClick:()=>{z.value=!0}},m(j,null,m(s,null))))},m(a,{class:"mt-3 relative z-10",label:"与你有个好心情~",value:U.title,onChange:e=>{U.title=e}}),m("div",{class:"text-gray-500 py-3"},m("label",null,`${k}/`),m(E,{value:U.slug,onChange:e=>{U.slug=e}})),m(e,{loading:!(!q.value||U.title),onChange:e=>{U.text=e},text:U.text}),m(p,{show:z.value,width:450,style:{maxWidth:"90vw"},placement:"right",onUpdateShow:e=>{z.value=e}},m(f,{title:"文章设定"},m(g,null,m(h,{label:"页面顺序"},m(v,{placeholder:"",value:U.order,onChange:e=>{U.order=null!=e?e:0}}))))))}));export{U as default};
//# sourceMappingURL=write-309457b1-fbdec80.js.map
