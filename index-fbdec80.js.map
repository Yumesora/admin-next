{"version":3,"file":"index-fbdec80.js","sources":["../vite/modulepreload-polyfill","../vite/preload-helper","../src/router/name.ts","../src/layouts/router-view.tsx","../src/configs.ts","../src/utils/auth.ts","../src/stores/user.ts","../src/utils/build-menus.ts","../src/hooks/use-deps-injection.ts","../plugin-vue:export-helper","../src/components/avatar/index.vue","../src/constants/env.ts","../src/stores/ui.ts","../src/components/sidebar/index.tsx","../src/layouts/sidebar/index.tsx","../src/utils/time.ts","../src/components/ip-info/index.tsx","../src/components/shorthand/index.tsx","../src/external/api/hitokoto.ts","../src/layouts/content/index.tsx","../src/views/dashboard/index.tsx","../src/external/api/jinrishici.ts","../src/components/button/parallax-button.vue","../src/views/login/index.vue","../src/router/route.tsx","../src/router/router.ts","../src/utils/rest.ts","../src/stores/category.ts","../src/App.tsx","../src/router/guard.ts","../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","const scriptRel = 'modulepreload';const seen = {};const base = 'https://cdn.jsdelivr.net/gh/mx-space/admin-next@gh-pages/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","export enum RouteName {\n  Dashboard = 'dashboard',\n  Post = 'post',\n  ViewPost = 'view-posts',\n  EditPost = 'edit-posts',\n  EditCategory = 'edit-category',\n  Note = 'note',\n  ViewNote = 'view-notes',\n  EditNote = 'edit-notes',\n  Comment = 'comment',\n  Page = 'page',\n  ListPage = 'page-list',\n  EditPage = 'page-edit',\n  Say = 'say',\n  ListSay = 'say-list',\n  EditSay = 'say-edit',\n  Project = 'project',\n  ListProject = 'project-list',\n\n  EditProject = 'project-edit',\n  Friend = 'friends',\n  File = 'files',\n  Analyze = 'analyze',\n  Setting = 'setting',\n  Profile = 'setting-profile',\n  System = 'setting-system',\n  Security = 'setting-security',\n  Reset = 'reset',\n  Other = 'other',\n  Backup = 'backup',\n  Markdown = 'markdown',\n  Cron = 'cron',\n  Log = 'log',\n  Optimize = 'optimize',\n  Login = 'login',\n  Home = 'home',\n  Setup = 'setup',\n  ListShortHand = 'shorthand',\n}\n","import { defineComponent } from 'vue'\nimport { NSpin } from 'naive-ui'\n\nimport { Suspense, VNode } from 'vue'\nimport { RouteLocation, RouterView } from 'vue-router'\nconst $RouterView = defineComponent({\n  setup() {\n    return () => (\n      <RouterView>\n        {{\n          default({ Component }: { Component: VNode; route: RouteLocation }) {\n            return (\n              <Suspense>\n                {{\n                  default: () => Component,\n\n                  fallback() {\n                    return () => (\n                      <div class=\"fixed left-1/2 top-1/2 transform text-primary-default -translate-y-1/2 -translate-x-1/2\">\n                        <NSpin strokeWidth={14} show rotate />\n                      </div>\n                    )\n                  },\n                }}\n              </Suspense>\n            )\n          },\n        }}\n      </RouterView>\n    )\n  },\n})\nexport default $RouterView\n","export const configs = {\n  title: window.injectData.TITLE || '静かな森',\n}\n","import Cookies from 'js-cookie'\n\nconst TokenKey = 'mx-admin-token'\n\nexport function getToken(): string | null {\n  return Cookies.get(TokenKey)\n    ? JSON.parse(Cookies.get(TokenKey) as string)\n    : null\n}\n\nexport function setToken(token: string, expires: number | Date) {\n  if (!token) {\n    return\n  }\n  return Cookies.set(TokenKey, JSON.stringify(token), { expires })\n}\n\nexport function removeToken() {\n  return Cookies.remove(TokenKey)\n}\n","import { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { UserModel } from '../models/user'\nimport { getToken, setToken } from '../utils/auth'\nimport { RESTManager } from '../utils/rest'\nexport function UserStore() {\n  const user = ref<UserModel | null>(null)\n  const token = ref<string>('')\n\n  const $token = getToken()\n  if ($token) {\n    token.value = $token\n  }\n  const router = useRouter()\n  return {\n    user,\n    token,\n\n    async fetchUser() {\n      try {\n        const $user = await RESTManager.api.master.get<UserModel>()\n        user.value = $user\n      } catch (e) {\n        if (e.data?.message == '没有完成初始化!') {\n          router.replace('/setup')\n        }\n      }\n    },\n\n    updateToken($token: string) {\n      if ($token) {\n        setToken($token, 7)\n      }\n\n      token.value = $token\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { RouteRecordNormalized } from 'vue-router'\n\ntype TRouteRecordNormalized = Omit<RouteRecordNormalized, 'meta'> & {\n  meta?: {\n    query?: KV\n    params?: KV\n    icon: JSX.Element\n    title?: string\n    hide?: boolean\n    [key: string]: any\n  }\n}\nexport interface MenuModel {\n  title: string\n  path: string\n  icon: any\n  subItems?: Array<MenuModel>\n  hasParent: boolean\n  fullPath: string\n  query?: any\n}\n\nconst parsePath = (path: string, params?: KV) => {\n  // 1. add slash\n  let n = /^\\//.test(path) ? path : '/' + path\n\n  // 2. replace default params into path\n  const hasParams = n.match(/(\\/?:)/)\n  if (!hasParams) {\n    return n\n  }\n  if (!params || Object.prototype.toString.call(params) !== '[object Object]') {\n    throw new TypeError('params must be object')\n  }\n  for (const paramKey in params) {\n    n = n.replaceAll(':' + paramKey, params[paramKey])\n  }\n  return n\n}\n\nconst buildModel = (\n  item: TRouteRecordNormalized,\n  hasParent: boolean,\n  prevPath: string,\n): MenuModel => {\n  const path = parsePath(item.path, item.meta?.params)\n\n  const fullPath = prevPath + '/' + path\n\n  return {\n    title: (item.meta?.title as string) || item.name?.toString() || path,\n    path: path,\n    icon: item.meta?.icon as any,\n    subItems: buildSubMenus(item, fullPath),\n    hasParent,\n    fullPath: fullPath.replaceAll('//', '/'),\n    query: item.meta?.query,\n  }\n}\nfunction buildSubMenus(route: TRouteRecordNormalized, prevPath = '') {\n  if (Array.isArray(route.children)) {\n    return route.children\n      .filter((item) => {\n        if (!item.meta) {\n          return true\n        }\n        return item.meta.hide !== true\n      })\n      .map((item) => {\n        return buildModel(item as TRouteRecordNormalized, true, prevPath)\n      })\n  } else {\n    return []\n  }\n}\n\nexport const buildMenus = (\n  routes: Array<TRouteRecordNormalized>,\n): MenuModel[] =>\n  (\n    routes.find((item) => item.name === 'home' && item.path === '/') as any\n  ).children\n    .filter(\n      (item: TRouteRecordNormalized) =>\n        item.path !== '*' && item.meta?.hide !== true,\n    )\n    .map((item: TRouteRecordNormalized) => {\n      return buildModel(item, false, '')\n    })\n","import { camelCase } from 'lodash-es'\nimport { provide, inject } from 'vue'\n//定义一个用于状态共享的hook函数的标准接口\nexport interface FunctionalStore<T extends object> {\n  (...args: any[]): T\n  token?: symbol\n  root?: T\n}\n\n//对原生provide进行封装\n\n//由于inject函数只会从父组件开始查找，所以useProvider默认返回hook函数的调用结果，以防同组件层级需要使用\nexport function useProvider<T extends object>(func: FunctionalStore<T>): T {\n  !func.token && (func.token = Symbol('functional store'))\n  const depends = func()\n  provide(func.token, depends)\n  return depends\n}\n\n// 可以一次传入多个hook函数， 统一管理\nexport function useProviders(...funcs: FunctionalStore<any>[]) {\n  const stores = {} as any\n  funcs.forEach((func) => {\n    const deps = useProvider(func)\n    stores[camelCase(func.name)] = deps\n  })\n  return stores\n}\n\n//对原生inject进行封装\n\ntype InjectType = 'root' | 'optional'\n\n//接收第二个参数，'root'表示直接全局使用；optional表示可选注入，防止父组件的provide并未传入相关hook\nexport function useInjector<T extends object>(\n  func: FunctionalStore<T>,\n  type: 'optional',\n): T | null\nexport function useInjector<T extends object>(\n  func: FunctionalStore<T>,\n  type: 'root',\n): T\nexport function useInjector<T extends object>(func: FunctionalStore<T>): T\nexport function useInjector<T extends object>(\n  func: FunctionalStore<T>,\n  type?: InjectType,\n) {\n  const token = func.token as any\n  const root = func.root\n\n  switch (type) {\n    case 'optional':\n      return inject<T>(token) || func.root || null\n    case 'root':\n      if (!func.root) func.root = func()\n      return func.root\n    default:\n      if (inject(token)) {\n        return inject<T>(token)\n      }\n      if (root) return func.root\n      if (__DEV__) {\n        // vite reload bug\n        console.debug(\n          `状态钩子函数${func.name}未在上层组件通过调用useProvider提供`,\n        )\n        setTimeout(() => {\n          location.reload()\n        }, 50)\n      } else {\n        throw new Error(\n          `状态钩子函数${func.name}未在上层组件通过调用useProvider提供`,\n        )\n      }\n  }\n}\n","\nexport default (sfc, props) => {\n  for (const [key, val] of props) {\n    sfc[key] = val\n  }\n  return sfc\n}\n","<template>\n  <div class=\"avatar\" :style=\"{ height: `${size}px`, width: `${size}px` }\">\n    <img :src=\"src\" alt=\"\" :style=\"{ display: loaded ? '' : 'none' }\" />\n    <div class=\"sr-only\">一个头像</div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref, watch } from 'vue'\n\nexport default defineComponent({\n  props: {\n    size: {\n      type: Number,\n      default: 50,\n    },\n    src: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const loaded = ref(false)\n\n    const preloadImage = () => {\n      if (!props.src) {\n        return\n      }\n      const $$ = new Image()\n      $$.src = props.src\n\n      $$.onload = (e) => {\n        loaded.value = true\n      }\n    }\n    onMounted(() => {\n      preloadImage()\n    })\n\n    watch(\n      () => props.src,\n      () => {\n        preloadImage()\n      },\n    )\n\n    return {\n      loaded,\n    }\n  },\n})\n</script>\n\n<style lang=\"postcss\">\n.avatar {\n  @apply bg-gray$-default inline-block rounded-full relative overflow-hidden select-none;\n}\n.avatar img {\n  @apply rounded-full h-full max-w-full;\n\n  animation: scale 0.5s ease-out;\n}\n@keyframes scale {\n  0% {\n    transform: scale(0);\n  }\n  to {\n    transform: scale(1);\n  }\n}\n</style>\n","export const BASE_URL: string =\n  window.injectData.WEB_URL ||\n  (import.meta.env.VITE_APP_WEB_URL as string) ||\n  'http://localhost:2323'\n\n// export const __DEV__ = import.meta.env.DEV\n","/*\n * @Author: Innei\n * @Date: 2021-03-22 11:41:32\n * @LastEditTime: 2021-03-22 11:41:32\n * @LastEditors: Innei\n * @FilePath: /admin-next/src/stores/ui.ts\n * Mark: Coding with Love\n */\n\nimport { useDark, useToggle } from '@vueuse/core'\nimport { debounce } from 'lodash-es'\nimport { computed, onMounted, ref, watch } from 'vue'\n\nexport interface ViewportRecord {\n  w: number\n  h: number\n  mobile: boolean\n  pad: boolean\n  hpad: boolean\n  wider: boolean\n  widest: boolean\n  phone: boolean\n}\n\nexport function UIStore() {\n  const viewport = ref<ViewportRecord>({} as any)\n  const sidebarWidth = ref(250)\n  const sidebarCollapse = ref(viewport.value.mobile ? true : false)\n\n  const isDark = useDark()\n  const toggleDark = useToggle(isDark)\n\n  onMounted(() => {\n    const resizeHandler = debounce(updateViewport, 500, { trailing: true })\n    window.onresize = resizeHandler\n    updateViewport()\n  })\n  const updateViewport = () => {\n    const innerHeight = window.innerHeight\n    const width = document.documentElement.getBoundingClientRect().width\n    const { hpad, pad, mobile } = viewport.value\n\n    // 忽略移动端浏览器 上下滚动 导致的视图大小变化\n    if (\n      viewport.value.h &&\n      // chrome mobile delta == 56\n      Math.abs(innerHeight - viewport.value.h) < 80 &&\n      width === viewport.value.w &&\n      (hpad || pad || mobile)\n    ) {\n      return\n    }\n    viewport.value = {\n      w: width,\n      h: innerHeight,\n      mobile: window.screen.width <= 568 || window.innerWidth <= 568,\n      pad: window.innerWidth <= 768 && window.innerWidth > 568,\n      hpad: window.innerWidth <= 1024 && window.innerWidth > 768,\n      wider: window.innerWidth > 1024 && window.innerWidth < 1920,\n      widest: window.innerWidth >= 1920,\n\n      phone: window.innerWidth <= 768,\n    }\n  }\n\n  const contentWidth = computed(\n    () =>\n      viewport.value.w -\n      sidebarWidth.value +\n      (sidebarCollapse.value ? (viewport.value.mobile ? 50 : 100) : 0),\n  )\n\n  const contentInsetWidth = computed(\n    () =>\n      contentWidth.value -\n      parseInt(getComputedStyle(document.documentElement).fontSize) * 6,\n  )\n\n  watch(\n    () => isDark.value,\n    (isDark) => {\n      if (isDark) {\n        document.documentElement.classList.add('dark')\n      } else {\n        document.documentElement.classList.remove('dark')\n      }\n    },\n  )\n  return {\n    viewport,\n    contentWidth,\n    sidebarWidth,\n    contentInsetWidth,\n    sidebarCollapse,\n\n    isDark,\n    toggleDark,\n  }\n}\n","import { onClickOutside } from '@vueuse/core'\nimport Hamburger from '@vicons/ionicons5/es/Menu'\nimport { Icon } from '@vicons/utils'\nimport clsx from 'clsx'\nimport { computed, defineComponent, onMounted, PropType, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { configs } from '../../configs'\nimport { UserStore } from '../../stores/user'\nimport { buildMenus, MenuModel } from '../../utils/build-menus'\nimport { useInjector } from '../../hooks/use-deps-injection'\nimport { Avatar } from '../avatar'\nimport styles from './index.module.css'\nimport { NLayoutContent } from 'naive-ui'\nimport { BASE_URL } from 'constants/env'\nimport { UIStore } from 'stores/ui'\nexport const Sidebar = defineComponent({\n  name: 'SidebarComp',\n  props: {\n    collapse: {\n      type: Boolean,\n      required: true,\n    },\n    width: {\n      type: Number,\n      required: true,\n    },\n    onCollapseChange: {\n      type: Function as PropType<{ (status: boolean): void }>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const router = useRouter()\n    const { user } = useInjector(UserStore)\n    const route = computed(() => router.currentRoute.value)\n    const menus = ref<MenuModel[]>([])\n    onMounted(() => {\n      // @ts-expect-error\n      menus.value = buildMenus(router.getRoutes())\n    })\n\n    const _index = ref(0)\n\n    function updateIndex(index: number) {\n      if (index === _index.value) {\n        _index.value = -1\n        return\n      }\n      _index.value = index\n    }\n\n    function handleRoute(item: MenuModel, index?: number) {\n      if (item.subItems?.length) {\n      } else {\n        // console.log(item.fullPath)\n\n        router.push({\n          path: item.fullPath,\n          query: item.query,\n        })\n        if (index) {\n          updateIndex(index)\n        }\n      }\n    }\n\n    const title = configs.title\n    const sidebarRef = ref<HTMLDivElement>()\n    const uiStore = useInjector(UIStore)\n    onClickOutside(sidebarRef, (event) => {\n      const v = uiStore.viewport\n      const isM = v.value.pad || v.value.mobile\n      if (isM) {\n        props.onCollapseChange(true)\n      }\n    })\n    return () => (\n      <div\n        class={clsx(styles['root'], props.collapse ? styles['collapse'] : null)}\n        style={{\n          width: !props.collapse && props.width ? props.width + 'px' : '',\n        }}\n        ref={sidebarRef}\n      >\n        <div\n          class={\n            'fixed left-0 top-0 h-screen overflow-hidden z-10 text-white ' +\n            styles['sidebar']\n          }\n        >\n          <div class={'title relative font-medium text-center text-2xl'}>\n            <h1 class=\"py-6\" style={{ display: props.collapse ? 'none' : '' }}>\n              {title}\n            </h1>\n            <button\n              class={styles['collapse-button']}\n              onClick={() => {\n                props.onCollapseChange(!props.collapse)\n              }}\n            >\n              <Icon>\n                <Hamburger />\n              </Icon>\n            </button>\n          </div>\n\n          <NLayoutContent class={styles['menu']} nativeScrollbar={false}>\n            <div class={styles['items']}>\n              {menus.value.map((item, index) => {\n                return (\n                  <div\n                    class={clsx(\n                      'py-2',\n                      route.value.fullPath === item.fullPath ||\n                        route.value.fullPath.startsWith(item.fullPath)\n                        ? styles['active']\n                        : '',\n\n                      styles['item'],\n                    )}\n                    data-path={item.fullPath}\n                  >\n                    <button\n                      key={item.title}\n                      class={'py-2 flex w-full items-center'}\n                      onClick={\n                        item.subItems?.length\n                          ? () => updateIndex(index)\n                          : () => handleRoute(item, index)\n                      }\n                    >\n                      <span\n                        style={{ flexBasis: '3rem' }}\n                        class=\"flex justify-center\"\n                      >\n                        {item.icon}\n                      </span>\n                      <span class={styles['item-title']}>{item.title}</span>\n                    </button>\n                    {item.subItems && (\n                      <ul\n                        class={clsx(\n                          'overflow-hidden  ' +\n                            (!!item.subItems.length ? styles['has-child'] : ''),\n                          _index.value === index ? styles['expand'] : '',\n                        )}\n                        style={{\n                          maxHeight:\n                            _index.value === index\n                              ? item.subItems.length * 3.5 + 'rem'\n                              : '0',\n                        }}\n                      >\n                        {item.subItems.map((child) => {\n                          return (\n                            <li\n                              key={child.path}\n                              // data-fullPath={child.fullPath}\n                              class={clsx(\n                                route.value.fullPath === child.fullPath ||\n                                  route.value.fullPath.startsWith(\n                                    child.fullPath,\n                                  )\n                                  ? styles['active']\n                                  : '',\n                                styles['item'],\n                              )}\n                            >\n                              <button\n                                onClick={() => handleRoute(child)}\n                                class={'flex w-full items-center py-4'}\n                              >\n                                <span\n                                  class=\"flex justify-center items-center\"\n                                  style={{ flexBasis: '3rem' }}\n                                >\n                                  {child.icon}\n                                </span>\n                                <span class={styles['item-title']}>\n                                  {child.title}\n                                </span>\n                              </button>\n                            </li>\n                          )\n                        })}\n                      </ul>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n          </NLayoutContent>\n\n          <button\n            class={clsx(\n              'bottom-bar flex space-x-2 items-center  transform translate-y-1/3 phone:hidden',\n              props.collapse ? 'px-8' : 'px-12',\n            )}\n            onClick={() => {\n              window.open(BASE_URL)\n            }}\n          >\n            <Avatar src={user.value?.avatar} size={40} />\n            {!props.collapse ? (\n              <span class=\"pl-12\">{user.value?.name}</span>\n            ) : null}\n          </button>\n          <button\n            class=\"hidden phone:flex w-full items-center justify-center absolute bottom-0 pb-4\"\n            onClick={() => {\n              window.open(BASE_URL)\n            }}\n          >\n            <Avatar src={user.value?.avatar} size={40} />\n          </button>\n        </div>\n      </div>\n    )\n  },\n})\n","import $RouterView from 'layouts/router-view'\nimport { NLayoutContent } from 'naive-ui'\nimport { computed, CSSProperties, defineComponent, watchEffect } from 'vue'\nimport { Sidebar } from '../../components/sidebar'\nimport { UIStore } from '../../stores/ui'\nimport { useInjector } from '../../hooks/use-deps-injection'\nimport styles from './index.module.css'\nexport const SidebarLayout = defineComponent({\n  name: 'SidebarLayout',\n\n  setup(props) {\n    const ui = useInjector(UIStore)\n\n    const collapse = ui.sidebarCollapse\n    const isLaptop = computed(\n      () => ui.viewport.value.mobile || ui.viewport.value.pad,\n    )\n    watchEffect(() => {\n      collapse.value = isLaptop.value ? true : false\n    })\n\n    const sidebarWidth = ui.sidebarWidth\n    return () => (\n      <div class={styles['root']}>\n        <Sidebar\n          collapse={collapse.value}\n          width={sidebarWidth.value}\n          onCollapseChange={(s) => {\n            collapse.value = s\n          }}\n        />\n\n        <NLayoutContent\n          embedded\n          nativeScrollbar={false}\n          class={styles['content']}\n          style={\n            {\n              left: !collapse.value ? sidebarWidth.value + 'px' : '100px',\n              pointerEvents:\n                isLaptop.value && !collapse.value ? 'none' : 'auto',\n            } as CSSProperties\n          }\n        >\n          <$RouterView />\n        </NLayoutContent>\n      </div>\n    )\n  },\n})\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { parse, format as f } from 'date-fns'\n\nexport enum DateFormat {\n  'yyyy年M月d日',\n  'yyyy年M月d日 HH:mm:ss',\n  'HH:mm',\n\n  'H:mm:ss A',\n  'M-d HH:mm:ss',\n}\n\nexport const parseDate = (\n  time: string | Date,\n  format: keyof typeof DateFormat = 'yyyy年M月d日',\n) => f(new Date(time), format)\n\nexport const relativeTimeFromNow = (\n  time: Date | string,\n  current = new Date(),\n) => {\n  time = new Date(time)\n  const msPerMinute = 60 * 1000\n  const msPerHour = msPerMinute * 60\n  const msPerDay = msPerHour * 24\n  const msPerMonth = msPerDay * 30\n  const msPerYear = msPerDay * 365\n\n  const elapsed = +current - +time\n\n  if (elapsed < msPerMinute) {\n    const gap = Math.ceil(elapsed / 1000)\n    return gap <= 0 ? '刚刚' : gap + ' 秒前'\n  } else if (elapsed < msPerHour) {\n    return Math.round(elapsed / msPerMinute) + ' 分钟前'\n  } else if (elapsed < msPerDay) {\n    return Math.round(elapsed / msPerHour) + ' 小时前'\n  } else if (elapsed < msPerMonth) {\n    return Math.round(elapsed / msPerDay) + ' 天前'\n  } else if (elapsed < msPerYear) {\n    return Math.round(elapsed / msPerMonth) + ' 个月前'\n  } else {\n    return Math.round(elapsed / msPerYear) + ' 年前'\n  }\n}\n\nexport const getDayOfYear = (date = new Date()) => {\n  const now = date\n  const start = new Date(now.getFullYear(), 0, 0)\n  const diff = now.getTime() - start.getTime()\n  const oneDay = 1000 * 60 * 60 * 24\n  const day = Math.floor(diff / oneDay)\n\n  return day\n}\nexport default { parseDate, relativeTimeFromNow }\n","import { NPopover, PopoverTrigger } from 'naive-ui'\nimport { RESTManager } from 'utils'\nimport { defineComponent, PropType, ref } from 'vue'\nconst ipLocationCacheMap = new Map<string, IP>()\n\nexport const IpInfoPopover = defineComponent({\n  props: {\n    ip: {\n      type: String,\n      required: true,\n    },\n    triggerEl: {\n      type: [Object, Function] as PropType<(() => JSX.Element) | JSX.Element>,\n      required: true,\n    },\n    trigger: {\n      type: String as PropType<PopoverTrigger>,\n      default: 'click',\n    },\n  },\n  setup(props) {\n    const ipInfoText = ref('获取中..')\n    const setIpInfoText = (info: IP) => {\n      ipInfoText.value = `IP: ${info.ip}<br />\n      城市: ${\n        [info.countryName, info.regionName, info.cityName]\n          .filter(Boolean)\n          .join(' - ') || 'N/A'\n      }<br />\n      ISP: ${info.ispDomain || 'N/A'}<br />\n      组织: ${info.ownerDomain || 'N/A'}<br />\n      范围: ${info.range ? Object.values(info.range).join(' - ') : 'N/A'}\n      `\n    }\n    const resetIpInfoText = () => (ipInfoText.value = '获取中..')\n\n    const onIpInfoShow = async (show: boolean, ip: string) => {\n      if (!ip) {\n        return\n      }\n      if (show) {\n        if (ipLocationCacheMap.has(ip)) {\n          const ipInfo = ipLocationCacheMap.get(ip)!\n          setIpInfoText(ipInfo)\n          return\n        }\n\n        const data: any = await RESTManager.api.tools.ip(ip).get()\n\n        setIpInfoText(data)\n        ipLocationCacheMap.set(ip, data)\n      } else {\n        resetIpInfoText()\n      }\n    }\n\n    return () => (\n      <NPopover\n        trigger={props.trigger}\n        placement=\"top\"\n        onUpdateShow={async (show) => {\n          if (!props.ip) {\n            return\n          }\n          await onIpInfoShow(show, props.ip)\n        }}\n      >\n        {{\n          trigger() {\n            return typeof props.triggerEl == 'function'\n              ? props.triggerEl()\n              : props.triggerEl\n          },\n          default() {\n            return <div innerHTML={ipInfoText.value}></div>\n          },\n        }}\n      </NPopover>\n    )\n  },\n})\n\ninterface IP {\n  ip: string\n  countryName: string\n  regionName: string\n  cityName: string\n  ownerDomain: string\n  ispDomain: string\n  range?: {\n    from: string\n    to: string\n  }\n}\n\ninterface IPv6 {\n  status: string\n  country: string\n  countryCode: string\n  region: string\n  regionName: string\n  city: string\n  zip: string\n  lat: number\n  lon: number\n  timezone: string\n  isp: string\n  org: string\n  as: string\n  query: string\n}\n","import { RecentlyModel } from 'models/recently'\nimport { NButton, NInput, NSpace, useDialog } from 'naive-ui'\nimport { RESTManager } from 'utils'\nimport { ref } from 'vue'\n\nexport const useShorthand = () => {\n  const modal = useDialog()\n  const quickHandText = ref('')\n\n  return {\n    create() {\n      return new Promise<RecentlyModel | null>((resolve, reject) => {\n        const dialog = modal.create({\n          title: '速记',\n          type: 'success',\n\n          content() {\n            return (\n              <NInput\n                resizable={false}\n                type=\"textarea\"\n                onUpdateValue={(e) => {\n                  quickHandText.value = e\n                }}\n                value={quickHandText.value}\n                class=\"h-[300px] max-h-[80vh]\"\n              />\n            )\n          },\n          action() {\n            return (\n              <NSpace>\n                <NButton\n                  round\n                  type=\"primary\"\n                  onClick={() => {\n                    RESTManager.api.recently\n                      .post<RecentlyModel>({\n                        data: {\n                          content: quickHandText.value,\n                        },\n                      })\n                      .then((res) => {\n                        quickHandText.value = ''\n                        message.success('记录成功')\n                        dialog.destroy()\n                        resolve(res)\n                      })\n                      .catch((err) => {\n                        reject(err)\n                      })\n                  }}\n                >\n                  记好了\n                </NButton>\n                <NButton\n                  round\n                  onClick={() => {\n                    void dialog.destroy()\n                    resolve(null)\n                  }}\n                >\n                  不想记了\n                </NButton>\n              </NSpace>\n            )\n          },\n        })\n      })\n    },\n  }\n}\n","export enum SentenceType {\n  '动画' = 'a',\n  '漫画' = 'b',\n  '游戏' = 'c',\n  '文学' = 'd',\n  '原创' = 'e',\n  '来自网络' = 'f',\n  '其他' = 'g',\n  '影视' = 'h',\n  '诗词' = 'i',\n  '网易云' = 'j',\n  '哲学' = 'k',\n  '抖机灵' = 'l',\n}\nexport const fetchHitokoto = async (\n  type: SentenceType[] | SentenceType = SentenceType.文学,\n) => {\n  const json = await fetch(\n    'https://v1.hitokoto.cn/' +\n      (Array.isArray(type)\n        ? '?' + type.map((t) => 'c=' + t).join('&')\n        : '?c=' + type),\n  )\n  const data = (await (json.json() as unknown)) as {\n    id: number\n    hitokoto: string\n    type: string\n    from: string\n    from_who: string\n    creator: string\n    creator_uid: number\n    reviewer: number\n    uuid: string\n    created_at: string\n  }\n\n  return data\n}\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onUnmounted,\n  PropType,\n  provide,\n  ref,\n  VNode,\n} from 'vue'\nimport clsx from 'clsx'\nimport { useRouter } from 'vue-router'\nimport styles from './index.module.css'\nimport { Icon } from '@vicons/utils'\nimport Sun from '@vicons/fa/es/Sun'\nimport Moon from '@vicons/fa/es/Moon'\nimport { useInjector } from 'hooks/use-deps-injection'\nimport { UIStore } from 'stores/ui'\n\nconst ProvideKey = Symbol('inject')\n\nexport const useLayout = () =>\n  inject(ProvideKey, {\n    addFloatButton(el: VNode) {},\n    removeFloatButton(name: symbol) {},\n    setHeaderButton(el: VNode | null) {},\n  })\nexport const ContentLayout = defineComponent({\n  props: {\n    actionsElement: {\n      type: Object as PropType<JSX.Element | null>,\n      required: false,\n    },\n    footerButtonElement: {\n      type: Object as PropType<JSX.Element | null>,\n      required: false,\n    },\n    title: {\n      type: String,\n    },\n  },\n  setup(props, ctx) {\n    const { slots } = ctx\n    const router = useRouter()\n    const route = computed(() => router.currentRoute)\n    const A$ael = () => props.actionsElement ?? null\n    const A$fel = () => props.footerButtonElement ?? null\n    const footerExtraButtonEl = ref<\n      null | ((() => VNode) & { displayName$: symbol })[]\n    >(null)\n    provide(ProvideKey, {\n      addFloatButton(el: VNode | (() => VNode)) {\n        footerExtraButtonEl.value ??= []\n        const E: any = typeof el === 'function' ? el : () => el\n        E.displayName$ = E.name ? Symbol(E.name) : Symbol('fab')\n        footerExtraButtonEl.value.push(E)\n\n        return E.displayName$\n      },\n      removeFloatButton(name: symbol) {\n        if (!footerExtraButtonEl.value) {\n          return\n        }\n        const index = footerExtraButtonEl.value.findIndex(\n          (E) => E.displayName$ === name,\n        )\n        if (index && index !== -1) {\n          footerExtraButtonEl.value.splice(index, 1)\n        }\n      },\n\n      setHeaderButton(el: VNode | null) {\n        if (!el) {\n          SettingHeaderEl.value = null\n          return\n        }\n        SettingHeaderEl.value = () => el\n      },\n    })\n\n    onUnmounted(() => {\n      footerExtraButtonEl.value = null\n    })\n\n    const { isDark, toggleDark } = useInjector(UIStore)\n    const SettingHeaderEl = ref<(() => VNode) | null>()\n    return () => (\n      <>\n        <header class={styles['header']}>\n          <div class={styles['header-blur']}></div>\n          <h1 class={styles['title']}>\n            {props.title ?? route.value.value.meta.title}\n          </h1>\n\n          <div class={clsx(styles['header-actions'], 'space-x-4')}>\n            {SettingHeaderEl.value ? (\n              <SettingHeaderEl.value />\n            ) : props.actionsElement ? (\n              <A$ael />\n            ) : (\n              slots.actions?.()\n            )}\n          </div>\n        </header>\n        <main class={styles['main']}>{slots.default?.()}</main>\n        <footer class={styles['buttons']}>\n          {footerExtraButtonEl.value\n            ? footerExtraButtonEl.value.map((E: any) => (\n                <E key={E.displayName} />\n              ))\n            : null}\n          {props.footerButtonElement ? <A$fel /> : slots.buttons?.()}\n          <button onClick={() => void toggleDark()}>\n            <Icon>{isDark.value ? <Sun /> : <Moon />}</Icon>\n          </button>\n        </footer>\n      </>\n    )\n  },\n})\n","import Code24Filled from '@vicons/fluent/es/Code24Filled'\nimport Comment24Filled from '@vicons/fluent/es/Comment24Filled'\nimport Extension24Filled from '@vicons/fluent/es/Extension24Filled'\nimport Games24Regular from '@vicons/fluent/es/Games24Regular'\nimport Guest16Filled from '@vicons/fluent/es/Guest16Filled'\nimport Link24Filled from '@vicons/fluent/es/Link24Filled'\nimport Note24Filled from '@vicons/fluent/es/Note24Filled'\nimport ChatbubblesSharp from '@vicons/ionicons5/es/ChatbubblesSharp'\nimport AddLinkFilled from '@vicons/material/es/AddLinkFilled'\nimport BubbleChartFilled from '@vicons/material/es/BubbleChartFilled'\nimport OnlinePredictionFilled from '@vicons/material/es/OnlinePredictionFilled'\nimport Activity from '@vicons/tabler/es/Activity'\nimport Copy from '@vicons/tabler/es/Copy'\nimport File from '@vicons/tabler/es/File'\nimport Pencil from '@vicons/tabler/es/Pencil'\nimport Refresh from '@vicons/tabler/es/Refresh'\nimport { Icon } from '@vicons/utils'\nimport { IpInfoPopover } from 'components/ip-info'\nimport { useShorthand } from 'components/shorthand'\nimport { fetchHitokoto, SentenceType } from 'external/api/hitokoto'\nimport { getJinRiShiCiOne, ShiJuData } from 'external/api/jinrishici'\nimport { useInjector } from 'hooks/use-deps-injection'\nimport { ContentLayout } from 'layouts/content'\nimport { pick } from 'lodash-es'\nimport { Stat } from 'models/stat'\nimport {\n  NBadge,\n  NButton,\n  NCard,\n  NGi,\n  NGrid,\n  NH1,\n  NH3,\n  NP,\n  NPopover,\n  NSkeleton,\n  NSpace,\n  NStatistic,\n  NText,\n  NThing,\n  useMessage,\n} from 'naive-ui'\nimport { RouteName } from 'router/name'\nimport { UserStore } from 'stores/user'\nimport { parseDate, RESTManager } from 'utils'\nimport {\n  computed,\n  defineComponent,\n  onBeforeMount,\n  onUnmounted,\n  PropType,\n  ref,\n  VNode,\n} from 'vue'\nimport { useRouter } from 'vue-router'\n\nexport const DashBoardView = defineComponent({\n  name: 'Dashboard',\n  setup() {\n    const stat = ref(\n      new Proxy(\n        {},\n        {\n          get() {\n            return 'N/A'\n          },\n        },\n      ) as Stat,\n    )\n    const statTime = ref(null as unknown as Date)\n    const fetchStat = async () => {\n      const counts = (await RESTManager.api.aggregate.stat.get()) as any\n      stat.value = counts\n      statTime.value = new Date()\n    }\n\n    const refreshHitokoto = () => {\n      fetchHitokoto([\n        SentenceType.动画,\n        SentenceType.原创,\n        SentenceType.哲学,\n        SentenceType.文学,\n      ]).then((data) => {\n        const postfix = Object.values(\n          pick(data, ['from', 'from_who', 'creator']),\n        ).filter(Boolean)[0]\n        if (!data.hitokoto) {\n          hitokoto.value = '没有获取到句子信息'\n        } else {\n          hitokoto.value = data.hitokoto + (postfix ? ' —— ' + postfix : '')\n        }\n      })\n    }\n\n    // 轮询状态计时器\n    let timer: any\n    onMounted(() => {\n      timer = setTimeout(function polling() {\n        fetchStat().then(() => {\n          timer = setTimeout(polling, 3000)\n        })\n      }, 3000)\n    })\n    onUnmounted(() => {\n      timer = clearTimeout(timer)\n    })\n\n    const shiju = ref('')\n    const shijuData = ref<ShiJuData | null>(null)\n    onBeforeMount(() => {\n      refreshHitokoto()\n      fetchStat()\n\n      getJinRiShiCiOne().then((data) => {\n        shiju.value = data.content\n        shijuData.value = data\n      })\n    })\n\n    const hitokoto = ref('')\n    const message = useMessage()\n    // const uiStore = useInjector(UIStore)\n    const userStore = useInjector(UserStore)\n    const router = useRouter()\n    const UserLoginStat = defineComponent(() => () => (\n      <>\n        <NH3 class=\"text-opacity-80 font-light\">登陆记录</NH3>\n        <p class=\"-mt-2 mb-3 relative text-gray-500\">\n          <span>\n            上次登陆 IP:{' '}\n            {userStore.user.value?.lastLoginIp ? (\n              <IpInfoPopover\n                trigger=\"hover\"\n                triggerEl={<span>{userStore.user.value?.lastLoginIp}</span>}\n                ip={userStore.user.value?.lastLoginIp}\n              ></IpInfoPopover>\n            ) : (\n              'N/A'\n            )}\n          </span>\n          <div class=\"pt-[.5rem]\"></div>\n          <span>\n            上次登陆时间:{' '}\n            {userStore.user.value?.lastLoginTime ? (\n              <time>\n                {parseDate(\n                  userStore.user.value?.lastLoginTime,\n                  'yyyy年M月d日 HH:mm:ss',\n                )}\n              </time>\n            ) : (\n              'N/A'\n            )}\n          </span>\n        </p>\n\n        <div class=\"pb-4\"></div>\n      </>\n    ))\n\n    const { create: createShortHand } = useShorthand()\n\n    const dataStat = computed<CardProps[]>(() => [\n      {\n        label: '博文',\n        value: stat.value.posts,\n        icon: <Code24Filled />,\n        actions: [\n          {\n            name: '撰写',\n            primary: true,\n            onClick() {\n              router.push({ name: RouteName.EditPost })\n            },\n          },\n          {\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.ViewPost, query: { page: 1 } })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '日记',\n        value: stat.value.notes,\n        icon: <Note24Filled />,\n        actions: [\n          {\n            name: '撰写',\n            primary: true,\n            onClick() {\n              router.push({ name: RouteName.EditNote })\n            },\n          },\n          {\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.ViewNote, query: { page: 1 } })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '页面',\n        value: stat.value.pages,\n        icon: <File />,\n        actions: [\n          {\n            primary: true,\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.ListPage, query: { page: 1 } })\n            },\n          },\n        ],\n      },\n      {\n        label: '速记',\n        value: stat.value.recently,\n        icon: <Pencil />,\n        actions: [\n          {\n            primary: true,\n            name: '记点啥',\n\n            onClick() {\n              createShortHand()\n            },\n          },\n          {\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.ListShortHand, query: { page: 1 } })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '分类',\n        value: stat.value.categories,\n        icon: <Extension24Filled />,\n        actions: [\n          {\n            primary: true,\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.EditCategory })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '全部评论',\n        value: stat.value.allComments,\n        icon: <Comment24Filled />,\n        actions: [\n          {\n            primary: true,\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.Comment, query: { state: 1 } })\n            },\n          },\n        ],\n      },\n      {\n        label: '未读评论',\n        value: stat.value.unreadComments,\n        icon: <ChatbubblesSharp />,\n        actions: [\n          {\n            primary: true,\n            showBadage: true,\n            name: '查看',\n            onClick() {\n              router.push({ name: RouteName.Comment, query: { state: 0 } })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '友链',\n        value: stat.value.links,\n        icon: <Link24Filled />,\n        actions: [\n          {\n            primary: true,\n            name: '管理',\n            onClick() {\n              router.push({ name: RouteName.Friend, query: { state: 0 } })\n            },\n          },\n        ],\n      },\n      {\n        label: '新的友链申请',\n        value: stat.value.linkApply,\n        icon: <AddLinkFilled />,\n        actions: [\n          {\n            primary: true,\n            showBadage: true,\n            name: '查看',\n            onClick() {\n              router.push({ name: RouteName.Friend, query: { state: 1 } })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '说说',\n        value: stat.value.says,\n        icon: <AddLinkFilled />,\n        actions: [\n          {\n            primary: true,\n\n            name: '说一句',\n            onClick() {\n              router.push({\n                name: RouteName.EditSay,\n              })\n            },\n          },\n\n          {\n            primary: false,\n            name: '管理',\n            onClick() {\n              router.push({\n                name: RouteName.ListSay,\n              })\n            },\n          },\n        ],\n      },\n\n      {\n        label: 'API 总调用次数',\n        value:\n          // @ts-expect-error\n          stat.value.callTime !== 'N/A'\n            ? Intl.NumberFormat('en-us').format(stat.value.callTime)\n            : 'N/A',\n        icon: <Activity />,\n        actions: [\n          {\n            primary: true,\n            name: '查看',\n            onClick() {\n              router.push({\n                name: RouteName.Analyze,\n              })\n            },\n          },\n\n          {\n            name: '清空缓存',\n            onClick() {\n              RESTManager.api.clean_catch.get().then(() => {\n                message.success('清除成功')\n              })\n            },\n          },\n        ],\n      },\n      {\n        label: '今日 IP 访问次数',\n        value: stat.value.todayIpAccessCount,\n        icon: <BubbleChartFilled />,\n        actions: [\n          {\n            primary: true,\n            name: '查看',\n            onClick() {\n              router.push({\n                name: RouteName.Analyze,\n              })\n            },\n          },\n        ],\n      },\n\n      {\n        label: '当前在线访客',\n        value: stat.value.online,\n        icon: <OnlinePredictionFilled />,\n      },\n      {\n        label: '今日访客',\n        value: stat.value.todayOnlineTotal,\n        icon: <Guest16Filled />,\n      },\n      {\n        value: stat.value.todayMaxOnline,\n        label: '今日最多同时在线人数',\n        icon: <Games24Regular />,\n      },\n    ])\n\n    const DataStat = defineComponent(() => {\n      return () => (\n        <>\n          <NSpace vertical>\n            <NH3 class=\"text-opacity-80 font-light\">数据统计</NH3>\n\n            <p class=\"-mt-4 mb-3 relative text-gray-500 flex items-center\">\n              <span>数据更新于: </span>\n              <time>\n                {' '}\n                {statTime.value\n                  ? parseDate(statTime.value, 'yyyy年M月d日 HH:mm:ss')\n                  : 'N/A'}\n              </time>\n\n              <NButton text onClick={fetchStat} class=\"ml-4 text-black\">\n                <Icon>\n                  <Refresh />\n                </Icon>\n              </NButton>\n            </p>\n          </NSpace>\n          <NGrid\n            xGap={20}\n            yGap={20}\n            cols={'2 100:1 400:2 600:3 900:4 1200:5 1600:6'}\n          >\n            {dataStat.value.map((props) => (\n              <NGi key={props.label}>\n                <Card {...props} />\n              </NGi>\n            ))}\n          </NGrid>\n        </>\n      )\n    })\n    return () => (\n      <ContentLayout>\n        <NH1 class=\"font-light\">欢迎回来</NH1>\n        <NGrid xGap={12} cols={'1 900:2'}>\n          <NGi>\n            <NH3 class=\"text-opacity-80 font-light !mt-[10px] !mb-[10px]\">\n              一言\n            </NH3>\n            <NP>\n              <NSpace align=\"center\" class=\"min-h-[3rem]\">\n                {hitokoto.value ? (\n                  <>\n                    <NText class=\"leading-normal\">{hitokoto.value}</NText>\n                    <div class=\"space-x-2 flex items-center\">\n                      <NButton\n                        text\n                        onClick={refreshHitokoto}\n                        class=\"ml-0 phone:float-right\"\n                      >\n                        <Icon>\n                          <Refresh />\n                        </Icon>\n                      </NButton>\n\n                      <NButton\n                        text\n                        onClick={() => {\n                          navigator.clipboard.writeText(hitokoto.value)\n                          message.success('已复制')\n                          message.info(hitokoto.value)\n                        }}\n                      >\n                        <Icon>\n                          <Copy />\n                        </Icon>\n                      </NButton>\n                    </div>\n                  </>\n                ) : (\n                  <NText>加载中...</NText>\n                )}\n              </NSpace>\n            </NP>\n          </NGi>\n          <NGi>\n            <NH3 class=\"text-opacity-80 font-light !mt-[10px] !mb-[10px]\">\n              今日诗句\n            </NH3>\n            <NP>\n              <NPopover trigger={'hover'} placement=\"bottom\">\n                {{\n                  trigger() {\n                    return <NText>{shiju.value || '获取中'}</NText>\n                  },\n                  default() {\n                    const origin = shijuData.value?.origin\n                    if (!origin) {\n                      return null\n                    }\n                    return (\n                      <NCard\n                        class=\"text-center min-w-[350px] max-w-[65vw] max-h-[60vh] overflow-auto\"\n                        bordered={false}\n                      >\n                        <NH3>{origin.title}</NH3>\n                        {origin.content.map((c) => (\n                          <NP key={c}>{c}</NP>\n                        ))}\n                      </NCard>\n                    )\n                  },\n                }}\n              </NPopover>\n            </NP>\n          </NGi>\n        </NGrid>\n        <UserLoginStat />\n        <DataStat />\n      </ContentLayout>\n    )\n  },\n})\n\nconst Statistic = defineComponent({\n  props: { label: String, value: [String, Number] },\n  setup(props) {\n    return () => (\n      <Fragment>\n        {props.value === 'N/A' ? (\n          <NSpace vertical align=\"center\" class=\"min-h-[4rem]\">\n            <NSkeleton style={{ height: '.8rem', width: '5rem' }}></NSkeleton>\n            <NSkeleton style={{ height: '1.8rem', width: '3rem' }}></NSkeleton>\n          </NSpace>\n        ) : (\n          <NStatistic label={props.label} value={props.value}></NStatistic>\n        )}\n      </Fragment>\n    )\n  },\n})\n\nconst Badge = defineComponent({\n  props: { processing: Boolean, value: [String, Number] },\n  setup(props, ctx) {\n    return () => (\n      <Fragment>\n        {props.value === 'N/A' ? (\n          ctx.slots\n        ) : (\n          <NBadge {...props}>{ctx.slots}</NBadge>\n        )}\n      </Fragment>\n    )\n  },\n})\n\ninterface CardProps {\n  label: string\n  value: number | string\n  icon: VNode | (() => VNode)\n  actions?: {\n    name: string\n    onClick: () => void\n    primary?: boolean\n    showBadage?: boolean\n  }[]\n}\n// const cardProps = ['label', 'value', 'icon', 'actions']\nconst Card = defineComponent({\n  props: {\n    label: String,\n    value: [Number, String],\n    icon: Function as PropType<() => JSX.Element>,\n    actions: {\n      type: Array as PropType<\n        {\n          name: string\n          onClick: () => void\n          primary?: boolean\n          showBadge?: { type: Boolean; default: false }\n        }[]\n      >,\n      default: () => [],\n    },\n  },\n  // @ts-expect-error\n  setup(props: CardProps) {\n    return () => (\n      <>\n        <NCard>\n          <NThing>\n            {{\n              header() {\n                return (\n                  <Statistic\n                    label={props.label}\n                    value={props.value}\n                  ></Statistic>\n                )\n              },\n              ['header-extra']() {\n                return (\n                  <Icon class=\"text-4xl opacity-70\">\n                    {typeof props.icon == 'function'\n                      ? props.icon()\n                      : props.icon}\n                  </Icon>\n                )\n              },\n\n              action() {\n                if (!props.actions) {\n                  return null\n                }\n                return (\n                  <NSpace size=\"medium\" align=\"center\">\n                    {props.actions.map((i) => {\n                      const Inner = () =>\n                        i.primary ? (\n                          <NButton round type=\"primary\" onClick={i.onClick}>\n                            {i.name}\n                          </NButton>\n                        ) : (\n                          <NButton text onClick={i.onClick}>\n                            {i.name}\n                          </NButton>\n                        )\n                      return i.showBadage ? (\n                        <Badge value={props.value} processing>\n                          <Inner />\n                        </Badge>\n                      ) : (\n                        <Inner />\n                      )\n                    })}\n                  </NSpace>\n                )\n              },\n            }}\n          </NThing>\n        </NCard>\n      </>\n    )\n  },\n})\n","export interface ShiJuData {\n  id: number\n  content: string\n  origin: {\n    title: string\n    dynasty: string\n    author: string\n    content: string[]\n    matchTags: string[]\n  }\n}\nexport const getJinRiShiCiOne = async () => {\n  const res = await fetch('https://v2.jinrishici.com/one.json')\n  const json = await res.json()\n  return json.data as ShiJuData\n}\n","<template>\n  <button\n    ref=\"parallaxBtn\"\n    class=\"parallax-btn pr\"\n    :data-title=\"title\"\n    :class=\"type\"\n    :style=\"{ color: forecolor }\"\n    @mousemove=\"move\"\n    @mouseup=\"up\"\n    @mousedown=\"down\"\n    @mouseleave=\"leave\"\n  />\n</template>\n\n<script lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { computed, defineComponent, onMounted, PropType, ref } from 'vue'\n\nexport default defineComponent({\n  props: {\n    title: {\n      type: String,\n      default: 'Button',\n    },\n    type: {\n      type: String as PropType<'normal' | 'warning' | 'danger'>,\n      default: 'normal',\n      validator(val: string) {\n        return ['normal', 'warning', 'danger'].includes(val)\n      },\n    },\n    forecolor: {\n      type: String,\n      default: '#fff',\n    },\n  },\n  setup() {\n    const btnStyle = ref<CSSStyleDeclaration>()\n    const parallaxBtn = ref<HTMLAnchorElement>()\n    onMounted(() => {\n      btnStyle.value = parallaxBtn.value?.style\n    })\n\n    const boundingClientRect = computed(() =>\n      parallaxBtn.value?.getBoundingClientRect(),\n    )\n\n    return {\n      parallaxBtn,\n      btnStyle,\n      boundingClientRect,\n      down(e) {\n        btnStyle.value!.setProperty('--tz', '-25px')\n      },\n      leave(e) {\n        btnStyle.value!.setProperty('--ty', '0')\n        btnStyle.value!.setProperty('--rx', '0')\n        btnStyle.value!.setProperty('--ry', '0')\n      },\n      move(e) {\n        const x = e.clientX - boundingClientRect.value!.left\n        const y = e.clientY - boundingClientRect.value!.top\n        const xc = boundingClientRect.value!.width / 2\n        const yc = boundingClientRect.value!.height / 2\n        const dx = x - xc\n        const dy = y - yc\n        btnStyle.value!.setProperty('--rx', `${dy / -1}deg`)\n        btnStyle.value!.setProperty('--ry', `${dx / 10}deg`)\n      },\n      up() {\n        btnStyle.value!.setProperty('--tz', '-12px')\n      },\n    }\n  },\n})\n</script>\n\n<style lang=\"postcss\">\n.parallax-btn {\n  &:not(:last-child) {\n    margin-right: 12px;\n  }\n  position: relative;\n  display: inline-block;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  user-select: none;\n  text-align: center;\n  font-size: 15px;\n  font-weight: 400;\n  color: #fff;\n  font-family: system-ui;\n  border-radius: 24px;\n  &::before {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    border-radius: 4px;\n    background: linear-gradient(135deg, #6e8efb, #a777e3);\n    box-shadow: 0 2px 5px rgba(#000, 0.2);\n    content: '';\n    will-change: transform;\n    transform: translateY(var(--ty, 0)) rotateX(var(--rx, 0))\n      rotateY(var(--ry, 0)) translateZ(var(--tz, -12px));\n    transition: box-shadow 500ms ease, transform 200ms ease;\n  }\n  &.warning::before {\n    background: linear-gradient(135deg, #e67e22, #f1c40f);\n  }\n  &.danger::before {\n    background: linear-gradient(135deg, #e74c3c, #d35400);\n  }\n  &::after {\n    display: inline-block;\n    position: relative;\n    font-weight: bold;\n    content: attr(data-title);\n    will-change: transform;\n    transform: translateY(var(--ty, 0)) rotateX(var(--rx, 0))\n      rotateY(var(--ry, 0));\n    transition: transform 200ms ease;\n  }\n  &:hover {\n    color: inherit;\n  }\n  &:hover::before {\n    box-shadow: 0 5px 15px rgba(#000, 0.3);\n  }\n}\n</style>\n","<script lang=\"ts\">\nimport { useInjector } from 'hooks/use-deps-injection'\nimport { useMessage } from 'naive-ui'\nimport { defineComponent, onMounted, onUnmounted, ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport Avatar from '../../components/avatar/index.vue'\nimport ParallaxButtonVue from '../../components/button/parallax-button.vue'\nimport { UserModel } from '../../models/user'\nimport { UserStore } from '../../stores/user'\n\nimport { RESTManager } from '../../utils/rest'\n\nconst bgUrl =\n  window.injectData.LOGIN_BG ||\n  (import.meta.env.VITE_APP_LOGIN_BG as string) ||\n  'https://gitee.com/xun7788/my-imagination/raw/master/uPic/1615516941397.jpg'\nexport const LoginView = defineComponent({\n  components: { Avatar, ParallaxButtonVue },\n  setup() {\n    const loaded = ref(false)\n    const { user, updateToken } = useInjector(UserStore)\n    const router = useRouter()\n    const input = ref<HTMLInputElement>(null!)\n\n    onBeforeMount(async () => {\n      const isInit =\n        window.injectData.INIT ??\n        (await RESTManager.api.init.get<{ isInit: boolean }>()).isInit\n      if (!isInit) {\n        return router.replace('/setup')\n      }\n    })\n    onMounted(() => {\n      const $$ = new Image()\n      $$.src = bgUrl\n      $$.onload = (e) => {\n        loaded.value = true\n      }\n      input.value.focus()\n\n      document.onkeydown = (e) => {\n        input.value.focus()\n      }\n    })\n\n    onUnmounted(() => {\n      document.onkeydown = null\n    })\n\n    const toast = useMessage()\n\n    const password = ref('')\n    const route = useRoute()\n    const handleLogin = async (e: Event) => {\n      e?.stopPropagation()\n      try {\n        if (!user.value || !user.value.username) {\n          toast.error('主人信息无法获取')\n          return\n        }\n        const res = await RESTManager.api.master.login.post<{\n          token: string & UserModel\n        }>({\n          data: {\n            username: user.value?.username,\n            password: password.value,\n          },\n        })\n        updateToken(res.token)\n\n        router.push(\n          route.query.from\n            ? decodeURI(route.query.from as string)\n            : '/dashboard',\n        )\n        toast.success('欢迎回来')\n      } catch (e) {\n        toast.error('登陆失败')\n      }\n    }\n\n    return {\n      // bgUrl: loaded.value ? bgUrl : '',\n      bgUrl,\n      loaded,\n      user,\n      password,\n      handleLogin,\n      input,\n    }\n  },\n})\n\nexport default LoginView\n</script>\n\n<template>\n  <div>\n    <div\n      class=\"bg transition-opacity duration-700\"\n      :style=\"{ backgroundImage: `url(${bgUrl})`, opacity: loaded ? 1 : 0 }\"\n    />\n\n    <div class=\"wrapper\">\n      <Avatar :src=\"user?.avatar\" :size=\"80\" />\n      <form action=\"#\" @submit.prevent=\"handleLogin\">\n        <div class=\"input-wrap\">\n          <input ref=\"input\" v-model=\"password\" type=\"password\" autofocus />\n        </div>\n        <ParallaxButtonVue\n          title=\"登陆\"\n          class=\"p-button-raised p-button-rounded\"\n          @click.prevent.stop=\"handleLogin\"\n        />\n      </form>\n    </div>\n  </div>\n</template>\n\n<style scoped=\"\">\n@import './index.css';\n</style>\n","/**\n * 路由在此定义\n * @author Innei <https://innei.ren>\n */\nimport Book from '@vicons/fa/es/Book'\nimport ChartLine from '@vicons/fa/es/ChartLine'\nimport Code from '@vicons/fa/es/Code'\nimport Cogs from '@vicons/fa/es/Cogs'\nimport Comment from '@vicons/fa/es/Comment'\nimport Comments from '@vicons/fa/es/Comments'\nimport EllipsisH from '@vicons/fa/es/EllipsisH'\nimport Eye from '@vicons/fa/es/Eye'\nimport File from '@vicons/fa/es/File'\nimport Flask from '@vicons/fa/es/Flask'\nimport Markdown from '@vicons/fa/es/Markdown'\nimport PencilAlt from '@vicons/fa/es/PencilAlt'\nimport PuzzlePiece from '@vicons/fa/es/PuzzlePiece'\nimport TachometerAlt from '@vicons/fa/es/TachometerAlt'\nimport UndoAlt from '@vicons/fa/es/UndoAlt'\nimport UserFriends from '@vicons/fa/es/UserFriends'\nimport Clock from '@vicons/tabler/es/Clock'\nimport Log from '@vicons/tabler/es/News'\nimport Pencil from '@vicons/tabler/es/Pencil'\nimport { Icon } from '@vicons/utils'\nimport $RouterView from 'layouts/router-view'\nimport { SidebarLayout } from 'layouts/sidebar'\nimport { DashBoardView } from 'views/dashboard'\nimport { RouteRecordRaw } from 'vue-router'\nimport LoginView from '../views/login/index.vue'\nimport { RouteName } from './name'\n\nexport const routeForMenu: Array<RouteRecordRaw> = [\n  {\n    path: '/dashboard',\n    component: DashBoardView,\n    name: RouteName.Dashboard,\n    meta: {\n      title: '仪表盘',\n      icon: (\n        <Icon>\n          <TachometerAlt />\n        </Icon>\n      ),\n    },\n  },\n  {\n    path: '/posts',\n    name: RouteName.Post,\n    meta: {\n      title: '博文',\n      icon: (\n        <Icon>\n          <Code />\n        </Icon>\n      ),\n    },\n    redirect: '/posts/view',\n    component: $RouterView,\n    children: [\n      {\n        path: 'view',\n        name: RouteName.ViewPost,\n        meta: {\n          title: '管理文章',\n          icon: (\n            <Icon>\n              <Eye />\n            </Icon>\n          ),\n          query: { page: 1 },\n        },\n        component: () =>\n          import('../views/manage-posts/list').then(\n            (m) => m.ManagePostListView,\n          ),\n      },\n\n      {\n        path: 'edit',\n        name: RouteName.EditPost,\n        meta: {\n          title: '撰写文章',\n          icon: (\n            <Icon>\n              <PencilAlt />\n            </Icon>\n          ),\n        },\n        props: true,\n        component: () => import('../views/manage-posts/write'),\n      },\n\n      {\n        path: 'category',\n        name: RouteName.EditCategory,\n        meta: {\n          title: '分类/标签',\n          icon: (\n            <Icon>\n              <PuzzlePiece />\n            </Icon>\n          ),\n        },\n        component: () =>\n          import('../views/manage-posts/category').then((m) => m.CategoryView),\n      },\n    ],\n  },\n  {\n    path: '/notes',\n    name: RouteName.Note,\n    meta: {\n      title: '记录',\n      icon: (\n        <Icon>\n          <Book />\n        </Icon>\n      ),\n    },\n    redirect: '/notes/view',\n    component: $RouterView,\n    children: [\n      {\n        path: 'view',\n        name: 'view-notes',\n        meta: {\n          title: '管理',\n          query: { page: 1 },\n          icon: (\n            <Icon>\n              <Eye />\n            </Icon>\n          ),\n        },\n        component: () =>\n          import('../views/manage-notes/list').then(\n            (m) => m.ManageNoteListView,\n          ),\n      },\n      {\n        path: 'edit',\n        name: RouteName.EditNote,\n        meta: {\n          title: '树洞',\n          icon: (\n            <Icon>\n              <PencilAlt />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/manage-notes/write'),\n      },\n    ],\n  },\n  {\n    path: '/comments',\n    name: RouteName.Comment,\n    meta: {\n      title: '评论',\n      query: { page: 1, state: 0 },\n      icon: (\n        <Icon>\n          <Comment />\n        </Icon>\n      ),\n    },\n    component: () => import('../views/comments/index'),\n  },\n  {\n    path: '/pages',\n    name: RouteName.Page,\n    redirect: '/pages/list',\n    meta: {\n      title: '页面',\n      icon: (\n        <Icon>\n          <File />\n        </Icon>\n      ),\n    },\n    component: $RouterView,\n    children: [\n      {\n        path: 'list',\n        name: RouteName.ListPage,\n        meta: {\n          title: '独立页面',\n          icon: (\n            <Icon>\n              <Eye />\n            </Icon>\n          ),\n          query: { page: 1 },\n        },\n        component: () =>\n          import('../views/manage-pages/list').then(\n            (m) => m.ManagePageListView,\n          ),\n      },\n      {\n        path: 'edit',\n        name: RouteName.EditPage,\n        meta: {\n          title: '创建页面',\n          icon: (\n            <Icon>\n              <PencilAlt />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/manage-pages/write'),\n      },\n    ],\n  },\n  {\n    path: '/says',\n    name: RouteName.Say,\n    meta: {\n      title: '说说',\n      icon: (\n        <Icon>\n          <Comments />\n        </Icon>\n      ),\n    },\n    component: $RouterView,\n    children: [\n      {\n        path: 'list',\n        name: RouteName.ListSay,\n        meta: {\n          title: '说什么了',\n          query: { page: 1 },\n          icon: (\n            <Icon>\n              <Eye />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/manage-says/list'),\n      },\n      {\n        path: 'edit',\n        name: RouteName.EditSay,\n        meta: {\n          title: '说点什么呢',\n          icon: (\n            <Icon>\n              <PencilAlt />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/manage-says/edit'),\n      },\n    ],\n  },\n  {\n    path: '/recently',\n    name: RouteName.ListShortHand,\n    meta: {\n      title: '速记',\n      icon: (\n        <Icon>\n          <Pencil />\n        </Icon>\n      ),\n    },\n    component: () => import('../views/shorthand'),\n  },\n  {\n    path: '/projects',\n    name: RouteName.Project,\n    meta: {\n      title: '项目',\n      icon: (\n        <Icon>\n          <Flask />\n        </Icon>\n      ),\n    },\n    component: $RouterView,\n    children: [\n      {\n        path: 'list',\n        name: RouteName.ListProject,\n        meta: {\n          title: '项目列表',\n          query: { page: 1 },\n          icon: (\n            <Icon>\n              <Eye />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/manage-project/list'),\n      },\n      {\n        path: 'edit',\n        name: RouteName.EditProject,\n        meta: {\n          title: '创建项目',\n          icon: (\n            <Icon>\n              <PencilAlt />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/manage-project/edit'),\n      },\n    ],\n  },\n  {\n    path: '/friends',\n    name: RouteName.Friend,\n    meta: {\n      title: '朋友们',\n      icon: (\n        <Icon>\n          <UserFriends />\n        </Icon>\n      ),\n      query: { state: '0' },\n    },\n    component: () => import('../views/manage-friends'),\n  },\n\n  {\n    path: '/analyze',\n    name: RouteName.Analyze,\n    component: () => import('../views/analzye'),\n    meta: {\n      title: '数据',\n      icon: (\n        <Icon>\n          <ChartLine />\n        </Icon>\n      ),\n      query: { page: 1 },\n    },\n  },\n  {\n    path: '/setting',\n    redirect: '/setting/user',\n    meta: {\n      title: '设定',\n      icon: (\n        <Icon>\n          <Cogs />\n        </Icon>\n      ),\n      params: { type: 'user' },\n    },\n    component: () => null,\n  },\n  {\n    path: '/setting/:type',\n    name: RouteName.Setting,\n    meta: {\n      title: '设定',\n      params: { type: 'user' },\n      hide: true,\n    },\n    component: () => import('../views/setting'),\n  },\n  {\n    path: '/other',\n    name: RouteName.Other,\n    meta: {\n      title: '其他',\n      icon: (\n        <Icon>\n          <EllipsisH />\n        </Icon>\n      ),\n    },\n    component: $RouterView,\n    children: [\n      {\n        path: 'backup',\n        name: RouteName.Backup,\n        meta: {\n          title: '备份',\n          icon: (\n            <Icon>\n              <UndoAlt />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/other/backup'),\n      },\n      {\n        path: 'markdown',\n        name: RouteName.Markdown,\n        meta: {\n          title: 'Markdown 导入导出',\n\n          icon: (\n            <Icon>\n              <Markdown />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/other/markdown-helper'),\n      },\n      {\n        path: 'cron',\n        name: RouteName.Cron,\n        meta: {\n          title: '任务',\n          icon: (\n            <Icon>\n              <Clock />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/other/cron'),\n      },\n      {\n        path: 'log',\n        name: RouteName.Log,\n        meta: {\n          title: '日志',\n          icon: (\n            <Icon>\n              <Log />\n            </Icon>\n          ),\n        },\n        component: () => import('../views/other/log'),\n      },\n    ],\n  },\n]\n\nexport const routes: RouteRecordRaw[] = [\n  {\n    path: '/',\n    component: SidebarLayout,\n    name: RouteName.Home,\n    redirect: '/dashboard',\n    children: [...routeForMenu],\n  },\n\n  {\n    path: '/login',\n    name: RouteName.Login,\n    meta: { isPublic: true, title: '登陆' },\n    component: LoginView,\n  },\n\n  {\n    path: '/setup',\n    name: RouteName.Setup,\n    meta: { isPublic: true, title: '初始化' },\n    component: () => import('../views/setup/index.vue'),\n  },\n  // for dev\n  {\n    path: '/dev',\n    redirect: __DEV__ ? undefined : '/',\n    component: $RouterView,\n    children: __DEV__\n      ? Object.entries(import.meta.glob('../views/dev/**/*.tsx')).map(\n          ([path, comp]) => ({\n            path: path\n              .split('/')\n              .slice(-1)[0]\n              .replace(/\\.[jt]sx$/, ''),\n            component: comp,\n          }),\n        )\n      : [],\n  },\n  // v1 compatibility\n  {\n    path: '/page/:path(.*)*',\n    name: 'page$',\n    redirect: (to) => {\n      return to.fullPath.replace(/^\\/page\\//, '/pages/')\n    },\n  },\n  {\n    path: '/extra/:path(.*)*',\n    name: 'extra',\n    redirect: (to) => {\n      return to.fullPath.replace(/^\\/extra/, '')\n    },\n  },\n  {\n    path: '/:pathMatch(.*)*',\n    name: '404',\n    meta: { isPublic: true },\n    redirect: '/',\n  },\n]\n","import {\n  createRouter,\n  createWebHashHistory,\n  createWebHistory,\n} from 'vue-router'\nimport { routes } from './route'\n\nexport const router = createRouter({\n  history: __DEV__ ? createWebHistory() : createWebHashHistory(),\n  routes,\n})\n","import camelcaseKeys from 'camelcase-keys'\nimport { isPlainObject } from 'lodash-es'\nimport {\n  extend,\n  RequestMethod,\n  RequestOptionsInit,\n  RequestOptionsWithResponse,\n} from 'umi-request'\nimport { router } from '../router/router'\nimport { getToken } from './auth'\n\nclass RESTManagerStatic {\n  private _$$instance: RequestMethod = null!\n  get instance() {\n    return this._$$instance\n  }\n  constructor() {\n    this._$$instance = extend({\n      // @ts-ignore\n      prefix: window.injectData.BASE_API || import.meta.env.VITE_APP_BASE_API,\n      timeout: 10000,\n      errorHandler: async (error) => {\n        const Message = window.message\n        if (error.request && !error.response) {\n          Message.error('网络错误')\n          return\n        }\n\n        if (error.response) {\n          if (process.env.NODE_ENV === 'development') {\n            console.log(error.response)\n            console.dir(error.response)\n          }\n          try {\n            const json = await error.response.json()\n            const message = json.message\n            if (Array.isArray(message)) {\n              message.forEach((m) => {\n                Message.error(m)\n              })\n            } else {\n              Message.error(message)\n            }\n          } catch (e) {\n            // Message.error('出错了, 请查看控制台')\n            console.log(e)\n          }\n\n          if (error?.response?.status === 401) {\n            router.push('/login')\n          }\n          return Promise.reject(error)\n        }\n      },\n    })\n  }\n  request(method: Method, route: string, options: RequestOptionsWithResponse) {\n    return this._$$instance[method](route, options)\n  }\n\n  get api() {\n    return buildRoute(this)\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => {}\nconst methods = ['get', 'post', 'delete', 'patch', 'put']\nconst reflectors = [\n  'toString',\n  'valueOf',\n  'inspect',\n  'constructor',\n  Symbol.toPrimitive,\n  Symbol.for('util.inspect.custom'),\n]\n\nfunction buildRoute(manager: RESTManagerStatic): IRequestHandler {\n  const route = ['']\n  const handler: any = {\n    get(target: any, name: Method) {\n      if (reflectors.includes(name)) return () => route.join('/')\n      if (methods.includes(name)) {\n        return async (options: RequestOptionsWithResponse) => {\n          const res = await manager.request(name, route.join('/'), {\n            ...options,\n          })\n\n          return Array.isArray(res) || isPlainObject(res)\n            ? (() => {\n                const transform = camelcaseKeys(res, { deep: true })\n\n                return {\n                  ...transform,\n                  get data() {\n                    return transform.data ?? transform\n                  },\n                }\n              })()\n            : res\n        }\n      }\n      route.push(name)\n      return new Proxy(noop, handler)\n    },\n    // @ts-ignore\n    apply(target: any, _, args) {\n      route.push(...args.filter((x: string) => x != null)) // eslint-disable-line eqeqeq\n      return new Proxy(noop, handler)\n    },\n  }\n  // @ts-ignore\n  return new Proxy(noop, handler)\n}\n\nexport const RESTManager = new RESTManagerStatic()\n\n// @ts-ignore\nif (__DEV__ && !window.api) {\n  Object.defineProperty(window, 'api', {\n    get() {\n      return RESTManager.api\n    },\n  })\n}\n\nRESTManager.instance.interceptors.request.use((url, options) => {\n  const token = getToken()\n\n  if (token) {\n    // @ts-ignore\n    options.headers.Authorization = 'bearer ' + token\n  }\n  return {\n    url: url + '?t=' + +new Date(),\n    options: {\n      ...options,\n\n      interceptors: true,\n    },\n  }\n}, {})\n\ninterface IRequestHandler<T = RequestOptionsInit> {\n  (id?: string): IRequestHandler\n  // @ts-ignore\n  get<P = unknown>(options?: T): Promise<P>\n  // @ts-ignore\n  post<P = unknown>(options?: T): Promise<P>\n  // @ts-ignore\n  patch<P = unknown>(options?: T): Promise<P>\n  // @ts-ignore\n  delete<P = unknown>(options?: T): Promise<P>\n  // @ts-ignore\n  put<P = unknown>(options?: T): Promise<P>\n  [key: string]: IRequestHandler\n}\nexport type Method = 'get' | 'delete' | 'post' | 'put' | 'patch'\n","import { ref } from 'vue'\nimport { CategoryModel, CategoryResponse } from 'models/category'\nimport { RESTManager } from 'utils/rest'\nimport { computed } from 'vue'\nexport function CategoryStore() {\n  const data = ref<CategoryModel[]>()\n\n  const map = computed(\n    () => new Map(data.value?.map((i) => [i.id, i])) || new Map(),\n  )\n\n  return {\n    data,\n    map,\n    get(id: string) {\n      return map.value.get(id)\n    },\n    async fetch(force?: boolean) {\n      if (!data.value || force) {\n        const response = (await RESTManager.api.categories.get({\n          params: {\n            type: 'Category',\n          },\n        })) as CategoryResponse\n\n        data.value = response.data\n      } else {\n        return data.value\n      }\n    },\n  }\n}\n","import {\n  darkTheme,\n  dateZhCN,\n  NConfigProvider,\n  NDialogProvider,\n  NMessageProvider,\n  NNotificationProvider,\n  useDialog,\n  useMessage,\n  useNotification,\n  zhCN,\n} from 'naive-ui'\nimport { RouteName } from 'router/name'\nimport { CategoryStore } from 'stores/category'\nimport { defineComponent, onMounted } from 'vue'\nimport { RouterView, useRouter } from 'vue-router'\nimport {\n  useInjector,\n  useProvider,\n  useProviders,\n} from './hooks/use-deps-injection'\nimport { UIStore } from './stores/ui'\nimport { UserStore } from './stores/user'\nconst Root = defineComponent({\n  name: 'Home',\n\n  setup() {\n    const { fetchUser } = useInjector(UserStore)\n    const router = useRouter()\n    onMounted(() => {\n      const message = useMessage()\n      const _error = message.error\n      Object.assign(message, {\n        error: (...rest: any[]) => {\n          // @ts-ignore\n          _error.apply(this, rest)\n          throw rest[0]\n        },\n      })\n\n      window.message = message\n      window.notification = useNotification()\n      window.dialog = useDialog()\n\n      import('socket').then((mo) => {\n        mo.socket.initIO()\n      })\n\n      fetchUser().then(() => {\n        const toSetting = localStorage.getItem('to-setting')\n        if (toSetting === 'true') {\n          router.push({\n            name: RouteName.Setting,\n            params: {\n              type: 'user',\n            },\n          })\n          localStorage.removeItem('to-setting')\n        }\n      })\n    })\n\n    return () => {\n      return <RouterView />\n    }\n  },\n})\n\nconst App = defineComponent({\n  setup() {\n    useProviders(UIStore, UserStore, CategoryStore)\n    const { isDark } = useProvider(UIStore)\n    return () => (\n      <NConfigProvider\n        locale={zhCN}\n        dateLocale={dateZhCN}\n        theme={isDark.value ? darkTheme : null}\n      >\n        <NNotificationProvider>\n          <NMessageProvider>\n            <NDialogProvider>\n              <Root />\n            </NDialogProvider>\n          </NMessageProvider>\n        </NNotificationProvider>\n      </NConfigProvider>\n    )\n  },\n})\n\nexport default App\n","import QProgress from 'qier-progress'\nimport { configs } from '../configs'\nimport { RESTManager } from '../utils/rest'\nimport { router } from './router'\nexport const progress = new QProgress({ colorful: false, color: '#1a9cf3' })\nconst title = configs.title\n\nrouter.beforeEach(async (to) => {\n  progress.start()\n  // guard for setup route\n\n  if (to.path === '/setup') {\n    const isInit =\n      window.injectData.INIT ??\n      (await RESTManager.api.init.get<{ isInit: boolean }>()).isInit\n\n    console.log('[isInit]', isInit)\n    if (isInit) {\n      return '/'\n    }\n  }\n\n  if (to.meta.isPublic || to.fullPath.startsWith('/dev')) {\n    return\n  } else {\n    const { ok } = await RESTManager.api('master')('check_logged').get<{\n      ok: number\n    }>()\n    if (!ok) {\n      return '/login?from=' + encodeURI(to.fullPath)\n    }\n  }\n})\n\nrouter.afterEach((to, _) => {\n  document.title = getPageTitle(to?.meta.title as any)\n  progress.finish()\n})\n\n// HACK editor save\nrouter.afterEach((to) => {\n  if (to.hash == '|publish') {\n    router.replace({ ...to, hash: '' })\n  }\n})\n\nrouter.onError(() => {\n  progress.finish()\n})\n\nfunction getPageTitle(pageTitle?: string | null) {\n  if (pageTitle) {\n    return `${pageTitle} - ${title}`\n  }\n  return `${title}`\n}\n","import 'reflect-metadata'\nimport { bus } from 'utils/event-bus'\nimport { createApp } from 'vue'\nimport App from './App'\nimport './index.css'\nimport { router } from './router'\n\nconst app = createApp(App)\n\napp.use(router)\napp.mount('#app')\n\nif (__DEV__) {\n  window.app = app\n  window.bus = bus\n}\n"],"names":["relList","document","createElement","supports","link","querySelectorAll","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","href","p","seen","__vitePreload","baseModule","deps","length","Promise","all","map","dep","isCss","endsWith","cssSelector","querySelector","as","crossOrigin","head","appendChild","res","rej","addEventListener","then","RouteName","RouteName2","$RouterView","defineComponent","setup","RouterView","default","Component","Suspense","fallback","class","NSpin","strokeWidth","show","rotate","configs","title","window","injectData","TITLE","TokenKey","Cookies","get","JSON","parse","remove","user","ref","token","$token","getToken","value","router2","useRouter","$user","RESTManager","api","master","e","data","message","replace","updateToken","$token2","expires","set","stringify","buildModel","item2","hasParent","prevPath","path","params","n","test","match","Object","prototype","toString","call","TypeError","paramKey","replaceAll","parsePath","meta","fullPath","name","icon","subItems","buildSubMenus","query","route","Array","isArray","children","filter","hide","func","Symbol","depends","root2","root","inject","Error","sfc","props","key","val","_sfc_main","size","Number","src","String","required","loaded","preloadImage","$$","Image","onload","_cache","$data","_openBlock","_createElementBlock","_ctx","alt","_hoisted_1","BASE_URL","WEB_URL","viewport","sidebarWidth","sidebarCollapse","mobile","isDark","useDark","toggleDark","useToggle","resizeHandler","debounce","updateViewport","trailing","onresize","innerHeight","width","documentElement","getBoundingClientRect","hpad","pad","h","Math","abs","w","screen","innerWidth","wider","widest","phone","contentWidth","computed","contentInsetWidth","parseInt","getComputedStyle","fontSize","isDark2","classList","add","Sidebar","collapse","Boolean","onCollapseChange","Function","useInjector","UserStore","currentRoute","menus","getRoutes","find","_index","index2","push","title2","sidebarRef","uiStore","UIStore","event","v","clsx","styles","style","display","onClick","Icon","Hamburger","NLayoutContent","nativeScrollbar","startsWith","updateIndex","handleRoute","flexBasis","maxHeight","child","open","Avatar","avatar","SidebarLayout","ui","collapse2","isLaptop","s","embedded","left","pointerEvents","DateFormat","DateFormat2","parseDate","time","format","f","Date","relativeTimeFromNow","current","msPerMinute","msPerHour","msPerDay","msPerMonth","msPerYear","elapsed","gap","ceil","round","getDayOfYear","date","now","start","getFullYear","diff","getTime","floor","ipLocationCacheMap","Map","IpInfoPopover","ip","triggerEl","trigger","ipInfoText","setIpInfoText","info","countryName","regionName","cityName","join","ispDomain","ownerDomain","range","values","onIpInfoShow","async","show2","has","ipInfo","tools","NPopover","placement","onUpdateShow","innerHTML","useShorthand","modal","useDialog","quickHandText","create","resolve","reject","dialog","content","NInput","resizable","onUpdateValue","action","NSpace","NButton","recently","post","success","destroy","catch","err","SentenceType","SentenceType2","fetchHitokoto","json","fetch","t","ProvideKey","useLayout","addFloatButton","el","removeFloatButton","setHeaderButton","ContentLayout","actionsElement","footerButtonElement","ctx","slots","A$ael","A$fel","footerExtraButtonEl","E","displayName$","findIndex","splice","SettingHeaderEl","actions","displayName","buttons","Sun","Moon","DashBoardView","stat","Proxy","statTime","fetchStat","counts","aggregate","refreshHitokoto","postfix","pick","hitokoto","timer","setTimeout","polling","clearTimeout","shiju","shijuData","message2","useMessage","userStore","UserLoginStat","NH3","lastLoginIp","lastLoginTime","createShortHand","dataStat","label","posts","Code24Filled","primary","EditPost","ViewPost","page","notes","Note24Filled","EditNote","ViewNote","pages","File","ListPage","Pencil","ListShortHand","categories","Extension24Filled","EditCategory","allComments","Comment24Filled","Comment","state","unreadComments","ChatbubblesSharp","showBadage","links","Link24Filled","Friend","linkApply","AddLinkFilled","says","EditSay","ListSay","callTime","Intl","NumberFormat","Activity","Analyze","clean_catch","todayIpAccessCount","BubbleChartFilled","online","OnlinePredictionFilled","todayOnlineTotal","Guest16Filled","todayMaxOnline","Games24Regular","DataStat","vertical","text","Refresh","NGrid","xGap","yGap","cols","NGi","Card","NH1","NP","align","NText","clipboard","writeText","Copy","origin","NCard","bordered","c","Statistic","Fragment","NSkeleton","height","NStatistic","Badge","processing","NBadge","NThing","header","i","Inner","validator","includes","forecolor","btnStyle","parallaxBtn","boundingClientRect","down","setProperty","leave","move","x","clientX","y","clientY","top","dx","dy","up","onMousemove","args","onMouseup","onMousedown","bgUrl","LOGIN_BG","components","ParallaxButtonVue","input","INIT","init","isInit","focus","onkeydown","toast","password","useRoute","handleLogin","stopPropagation","username","error","login","from","decodeURI","e2","_component_Avatar","_createElementVNode","_component_ParallaxButtonVue","routeForMenu","component","Dashboard","TachometerAlt","Post","Code","redirect","Eye","m","ManagePostListView","PencilAlt","PuzzlePiece","CategoryView","Note","Book","ManageNoteListView","Page","ManagePageListView","EditPage","Say","Comments","Project","Flask","ListProject","EditProject","UserFriends","ChartLine","Cogs","Setting","Other","EllipsisH","Backup","UndoAlt","Markdown","Cron","Clock","Log","routes","Home","Login","isPublic","LoginView","Setup","to","router","createRouter","history","createWebHashHistory","noop","methods","reflectors","toPrimitive","for","constructor","_$$instance","extend","prefix","BASE_API","timeout","errorHandler","Message","request","response","forEach","log","status","this","method","options","manager","handler","target","isPlainObject","transform","camelcaseKeys","deep","apply","_","buildRoute","id","force","instance","interceptors","use","url","headers","Authorization","Root","fetchUser","_error","assign","rest","notification","useNotification","mo","socket","initIO","localStorage","getItem","removeItem","App","funcs","stores","useProvider","camelCase","CategoryStore","NConfigProvider","locale","zhCN","dateLocale","dateZhCN","theme","darkTheme","NNotificationProvider","NMessageProvider","NDialogProvider","progress","QProgress","colorful","color","beforeEach","ok","encodeURI","afterEach","pageTitle","getPageTitle","finish","hash","onError","app","createApp","mount"],"mappings":"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"}