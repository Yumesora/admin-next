import{d as a,r as s,o as e,B as t,ac as n,ad as o,ae as r,b as d,e as l,f as u,n as i,ag as p,ah as c,ai as m,af as g,u as v}from"./vendor-a1343634-005d83d.js";import{_ as w,P as h,u as f,j as b,R as y,d as j}from"./index-005d83d.js";const k=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg",x=a({components:{ParallaxButtonVue:h},setup(){const a=s(!1),{updateToken:n,fetchUser:o}=f(b);e((()=>{const s=new Image;s.src=k,s.onload=s=>{a.value=!0}}));const r=t(),d=s(""),l=s("");return{bgUrl:k,loaded:a,password:d,handleRegister:async a=>{null==a||a.stopPropagation();try{const a=await y.api.master.register.post({data:{username:l.value,password:d.value}});n(a.token),r.success("欧尼酱!");const s=v();setTimeout((()=>{o().then((()=>{s.push({name:j.System})}))}),300)}catch(s){r.error("出了点小问题, 不要慌"),r.error(s.message)}},username:l}}}),R=x;n("data-v-7da614c0");const U={class:"wrapper"},_={class:"input-wrap"},B={class:"input-wrap"};o();var I=w(R,[["render",function(a,s,e,t,n,o){const v=r("ParallaxButtonVue");return d(),l("div",null,[u("div",{class:"bg transition-opacity duration-700",style:i({backgroundImage:`url(${a.bgUrl})`,opacity:a.loaded?1:0})},null,4),u("div",U,[u("form",{action:"#",onSubmit:s[2]||(s[2]=p(((...s)=>a.handleRegister&&a.handleRegister(...s)),["prevent"]))},[u("div",_,[c(u("input",{"onUpdate:modelValue":s[0]||(s[0]=s=>a.username=s),autofocus:"",placeholder:"这里填上你的用户名"},null,512),[[m,a.username]])]),u("div",B,[c(u("input",{"onUpdate:modelValue":s[1]||(s[1]=s=>a.password=s),type:"password",placeholder:"这里填上密码哦"},null,512),[[m,a.password]])]),g(v,{title:"注册",class:"p-button-raised p-button-rounded",onClick:p(a.handleRegister,["prevent","stop"])},null,8,["onClick"])],32)])])}],["__scopeId","data-v-7da614c0"]]);export{x as InitView,I as default};
//# sourceMappingURL=index-359baed0-005d83d.js.map
