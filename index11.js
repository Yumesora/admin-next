import{d as _,r as i,o as v,G as w,u as f,ag as C,b as y,e as h,f as t,n as B,ai as d,aj as p,ak as c,ah as E}from"./vendor.js";import{k,P as b,u as R,l as V,R as j}from"./index.js";const m=window.injectData.LOGIN_BG||"https://gitee.com/xun7788/my-imagination/raw/master/images/88426823_p0.jpg",I=_({components:{ParallaxButtonVue:b},setup(){const e=i(!1),{updateToken:s,fetchUser:g}=R(V);v(()=>{const a=new Image;a.src=m,a.onload=n=>{e.value=!0}});const o=w(),r=i(""),u=i("");return f(),{bgUrl:m,loaded:e,password:r,handleRegister:async a=>{a?.stopPropagation();try{const n=await j.api.master.register.post({data:{username:u.value,password:r.value}});s(n.token),o.success("\u6B27\u5C3C\u9171!"),localStorage.setItem("to-setting","true"),location.reload()}catch(n){o.error("\u51FA\u4E86\u70B9\u5C0F\u95EE\u9898, \u4E0D\u8981\u614C"),o.error(n.message)}},username:u}}}),$=I,x={class:"wrapper"},D={class:"input-wrap"},P={class:"input-wrap"};function U(e,s,g,o,r,u){const l=C("ParallaxButtonVue");return y(),h("div",null,[t("div",{class:"bg transition-opacity duration-700",style:B({backgroundImage:`url(${e.bgUrl})`,opacity:e.loaded?1:0})},null,4),t("div",x,[t("form",{action:"#",onSubmit:s[2]||(s[2]=d((...a)=>e.handleRegister&&e.handleRegister(...a),["prevent"]))},[t("div",D,[p(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>e.username=a),autofocus:"",placeholder:"\u8FD9\u91CC\u586B\u4E0A\u4F60\u7684\u7528\u6237\u540D"},null,512),[[c,e.username]])]),t("div",P,[p(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),type:"password",placeholder:"\u8FD9\u91CC\u586B\u4E0A\u5BC6\u7801\u54E6"},null,512),[[c,e.password]])]),E(l,{title:"\u6CE8\u518C",class:"p-button-raised p-button-rounded",onClick:d(e.handleRegister,["prevent","stop"])},null,8,["onClick"])],32)])])}var S=k($,[["render",U],["__scopeId","data-v-47865a10"]]);export{I as InitView,S as default};
