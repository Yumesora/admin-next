{"version":3,"file":"index-5350b809-194e3b7.js","sources":["../src/views/shorthand/index.tsx"],"sourcesContent":["import Add12Filled from '@vicons/fluent/es/Add12Filled'\nimport { useShorthand } from 'components/shorthand'\nimport { RecentlyModel } from 'models/recently'\nimport { NButton, NDataTable, NPopconfirm, NSpace } from 'naive-ui'\nimport { parseDate } from 'utils'\nimport { defineComponent, onMounted } from 'vue'\nimport { HeaderActionButton } from '../../components/button/rounded-button'\nimport { ContentLayout } from '../../layouts/content'\nimport { RESTManager } from '../../utils/rest'\n\nexport default defineComponent({\n  setup() {\n    const data = ref([] as RecentlyModel[])\n    const loading = ref(true)\n    onMounted(async () => {\n      RESTManager.api.recently.all\n        .get<{ data: RecentlyModel[] }>()\n        .then((res) => {\n          data.value = res.data\n          loading.value = false\n        })\n    })\n    const { create } = useShorthand()\n    return () => (\n      <ContentLayout\n        actionsElement={\n          <>\n            <HeaderActionButton\n              onClick={() => {\n                create().then((res) => {\n                  if (res) {\n                    data.value.unshift(res)\n                  }\n                })\n              }}\n              icon={<Add12Filled />}\n            />\n          </>\n        }\n      >\n        <NDataTable\n          remote\n          loading={loading.value}\n          bordered={false}\n          data={data.value}\n          columns={[\n            {\n              title: '内容',\n              key: 'content',\n              width: 500,\n              // ellipsis: {\n              //   tooltip: true,\n              // },\n            },\n            {\n              title: '记录时间',\n              key: 'created',\n              width: 100,\n              render(row) {\n                return parseDate(row.created, 'M-d HH:mm:ss')\n              },\n            },\n            {\n              title: '操作',\n              fixed: 'right',\n              width: 60,\n              key: 'id',\n              render(row) {\n                return (\n                  <NSpace>\n                    <NPopconfirm\n                      positiveText={'取消'}\n                      negativeText=\"删除\"\n                      onNegativeClick={async () => {\n                        await RESTManager.api.recently(row.id).delete()\n                        message.success('删除成功')\n                        data.value.splice(data.value.indexOf(row), 1)\n                      }}\n                    >\n                      {{\n                        trigger: () => (\n                          <NButton text type=\"error\" size=\"tiny\">\n                            移除\n                          </NButton>\n                        ),\n\n                        default: () => (\n                          <span style={{ maxWidth: '12rem' }}>\n                            确定要删除 {row.title} ?\n                          </span>\n                        ),\n                      }}\n                    </NPopconfirm>\n                  </NSpace>\n                )\n              },\n            },\n          ]}\n        ></NDataTable>\n      </ContentLayout>\n    )\n  },\n})\n"],"names":["defineComponent","setup","data","ref","loading","async","api","recently","all","get","then","res","value","create","useShorthand","ContentLayout","actionsElement","HeaderActionButton","onClick","unshift","icon","Add12Filled","NDataTable","remote","bordered","columns","title","key","width","render","row","parseDate","created","fixed","NSpace","NPopconfirm","positiveText","negativeText","onNegativeClick","RESTManager","id","delete","success","splice","indexOf","trigger","NButton","text","type","size","default","style","maxWidth"],"mappings":"sRAUA,MAAeA,EAAgB,CAC7BC,cACQC,EAAOC,EAAI,IACXC,EAAUD,GAAI,MACVE,YACIC,IAAIC,SAASC,IACtBC,MACAC,MAAMC,MACAC,MAAQD,EAAIT,OACTU,OAAQ,cAGhBC,OAAEA,GAAWC,UACZ,MACJC,EAAD,CACEC,0BAEKC,EAAD,CACEC,QAAS,SACER,MAAMC,IACTA,KACGC,MAAMO,QAAQR,OAIzBS,OAAOC,EAAD,YAKXC,EAAD,CACEC,QAAM,EACNnB,QAASA,EAAQQ,MACjBY,UAAU,EACVtB,KAAMA,EAAKU,MACXa,QAAS,CACP,CACEC,MAAO,KACPC,IAAK,UACLC,MAAO,KAKT,CACEF,MAAO,OACPC,IAAK,UACLC,MAAO,IACPC,OAAOC,GACEC,EAAUD,EAAIE,QAAS,iBAGlC,CACEN,MAAO,KACPO,MAAO,QACPL,MAAO,GACPD,IAAK,KACLE,OAAOC,KAEFI,EAAD,OACGC,EAAD,CACEC,aAAc,KACdC,aAAa,KACbC,gBAAiBjC,gBACTkC,EAAYjC,IAAIC,SAASuB,EAAIU,IAAIC,iBAC/BC,QAAQ,UACX9B,MAAM+B,OAAOzC,EAAKU,MAAMgC,QAAQd,GAAM,KAG5C,CACCe,QAAS,MACNC,EAAD,CAASC,MAAI,EAACC,KAAK,QAAQC,KAAK,QAAO,MAKzCC,QAAS,MACN,OAAD,CAAMC,MAAO,CAAEC,SAAU,UAAW,SAC3BtB,EAAIJ,MAAM"}