import{d as e,b as t,e as a,f as r,B as o,aE as l,aa as i,w as s,o as n,aP as d,h as c,I as u,aR as p,bf as m,aS as w,J as f,G as h,F as v}from"./vendor-a3bf3ad0-2_19_59.js";import{A as y}from"./Add12Filled-e850f595-2_19_59.js";import{D as g}from"./Delete16Regular-af8ac10e-2_19_59.js";import{T as x}from"./index-348633d5-2_19_59.js";import{E as _}from"./edit-column-73bc48f1-2_19_59.js";import{R as k}from"./relative-time-b7c52aa8-2_19_59.js";import{u as b}from"./use-table-917c3adc-2_19_59.js";import{H as C}from"./rounded-button-00a9564c-2_19_59.js";import{R as j,a as B}from"./index-2_19_59.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 384 512"},z=r("path",{d:"M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400L0 512z",fill:"currentColor"},null,-1);var D=e({name:"Bookmark",render:function(e,r){return t(),a("svg",O,[z])}});const M={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},R=r("g",{fill:"none"},[r("path",{d:"M2.854 2.146a.5.5 0 1 0-.708.708l3.5 3.498a8.097 8.097 0 0 0-3.366 5.046a.5.5 0 1 0 .979.204a7.09 7.09 0 0 1 3.108-4.528L7.95 8.656a3.5 3.5 0 1 0 4.884 4.884l4.313 4.314a.5.5 0 0 0 .708-.708l-15-15z",fill:"currentColor"}),r("path",{d:"M10.124 8.003l3.363 3.363a3.5 3.5 0 0 0-3.363-3.363z",fill:"currentColor"}),r("path",{d:"M7.531 5.41l.803.803A6.632 6.632 0 0 1 10 6c3.206 0 6.057 2.327 6.74 5.602a.5.5 0 1 0 .98-.204C16.943 7.673 13.693 5 10 5c-.855 0-1.687.143-2.469.41z",fill:"currentColor"})],-1);var F=e({name:"EyeHide20Filled",render:function(e,r){return t(),a("svg",M,[R])}});const T=e({name:"NoteList",setup(){const{loading:t,checkedRowKeys:a,data:r,pager:O,sortProps:z,fetchDataFn:M}=b(((e,t)=>async(a=L.query.page||1,r=20)=>{const o=await j.api.notes.get({params:{page:a,size:r,select:"title _id id created modified mood weather hide secret hasMemory coordinates location",...z.sortBy?{sortBy:z.sortBy,sortOrder:z.sortOrder}:{}}});e.value=o.data,t.value=o.page})),R=o(),T=l(),L=i(),P=M;s((()=>L.query.page),(async e=>{await P(e)})),n((async()=>{await P()}));const S=e({setup(){const e=d([{type:"selection",options:["none","all"]},{title:"标题",sortOrder:!1,sorter:"default",key:"title",width:300,render:e=>c(p,{to:"/notes/edit?id="+e.id,class:"flex items-center space-x-2"},c("span",null,e.title),e.hide||e.secret&&+new Date(e.secret)-+new Date>0?c(u,{color:"#34495e"},c(F,null)):null,e.hasMemory?c(u,{color:"#e74c3c"},c(D,null)):null)},{title:"心情",key:"mood",width:100,render(e,t){var a;return c(_,{initialValue:null!=(a=r.value[t].mood)?a:"",onSubmit:async a=>{await j.api.notes(e.id).put({data:{mood:a}}),R.success("修改成功"),r.value[t].mood=a},placeholder:"心情"})}},{title:"天气",key:"weather",width:100,render(e,t){var a;return c(_,{initialValue:null!=(a=r.value[t].weather)?a:"",onSubmit:async a=>{await j.api.notes(e.id).put({data:{weather:a}}),R.success("修改成功"),r.value[t].weather=a},placeholder:"天气"})}},{title:"地点",key:"location",width:200,render(e){const{coordinates:t,location:a}=e;return a?c(m,{class:"truncate max-w-[200px]"},{tooltip:()=>c("div",{class:""},c("p",null,a),c("p",null,null==t?void 0:t.longitude,", ",null==t?void 0:t.latitude)),default:()=>a}):null}},{title:"创建于",key:"created",sortOrder:"descend",sorter:"default",width:200,render:e=>c(k,{time:e.created})},{title:"修改于",key:"modified",sorter:"default",sortOrder:!1,width:200,render:e=>c(k,{time:e.modified})},{title:"操作",key:"id",width:100,fixed:"right",render:e=>c(h,null,c(w,{positiveText:"取消",negativeText:"删除",onNegativeClick:async()=>{await j.api.notes(e.id).delete(),R.success("删除成功"),await P(O.value.currentPage)}},{trigger:()=>c(f,{text:!0,type:"error",size:"tiny"},"移除"),default:()=>c("span",{style:{maxWidth:"12rem"}},"确定要删除 ",e.title," ?")}))}]);return()=>c(x,{loading:t.value,columns:e,data:r,onFetchData:P,pager:O,onUpdateCheckedRowKeys:e=>{a.value=e},onUpdateSorter:async e=>{z.sortBy=e.sortBy,z.sortOrder=e.sortOrder}})}});return()=>c(B,null,{actions:()=>c(v,null,c(C,{variant:"error",disabled:0==a.value.length,onClick:()=>{T.warning({title:"警告",content:"你确定要删除？",positiveText:"确定",negativeText:"不确定",onPositiveClick:async()=>{for(const e of a.value)await j.api.notes(e).delete();a.value.length=0,R.success("删除成功"),await P()}})},icon:c(g,null)}),c(C,{to:"/notes/edit",icon:c(y,null)})),default:()=>c(S,null)})}});export{T as ManageNoteListView};
//# sourceMappingURL=list-be52faed-2_19_59.js.map
