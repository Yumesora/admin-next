import{T as e}from"./TelegramPlane-741a88f6-2_19_59.js";import{H as a}from"./rounded-button-00a9564c-2_19_59.js";import{M as l}from"./monaco-2cb49779-2_19_59.js";import{u as t}from"./use-parse-payload-770fb8f3-2_19_59.js";import{R as r,a as s,e as o}from"./index-2_19_59.js";import{d as n,aa as i,l as c,aP as p,k as m,o as u,h as d,aZ as b,a_ as f,aW as h,a$ as v,F as w,b2 as y,bp as g,b1 as j}from"./vendor-a3bf3ad0-2_19_59.js";const _=n({setup(){const n=i(),_=c(),x=p({name:"",previewUrl:"",docUrl:"",projectUrl:"",images:[],description:"",avatar:"",text:""}),P=m((()=>n.query.id));u((async()=>{const e=P.value;if(e&&"string"==typeof e){(e=>{t(x)(e)})((await r.api.projects(e).get({})).data)}}));const U=async()=>{const e=()=>{try{if(!x.text||0==x.text.trim().length)throw"内容为空";return{...g(j(x),((e,a,l)=>(e[l]=void 0===a?null:"string"==typeof a&&0==a.length?"":a,e))),text:x.text.trim()}}catch(e){throw message.error(e),e}};if(P.value){if(!y(P.value))return;const a=P.value;await r.api.projects(a).put({data:e()}),message.success("修改成功")}else await r.api.projects.post({data:e()}),message.success("发布成功");_.push({name:o.ListProject})};return()=>d(s,{actionsElement:d(w,null,d(a,{variant:"primary",onClick:U,icon:d(e,null)}))},d(b,null,d(f,{label:"项目名称",required:!0,labelPlacement:"left",labelStyle:{width:"6rem"}},d(h,{autofocus:!0,placeholder:"",value:x.name,onInput:e=>{x.name=e}})),d(f,{label:"文档地址",labelPlacement:"left",labelStyle:{width:"6rem"}},d(h,{placeholder:"",value:x.docUrl,onInput:e=>{x.docUrl=e}})),d(f,{label:"预览地址",labelPlacement:"left",labelStyle:{width:"6rem"}},d(h,{placeholder:"",value:x.previewUrl,onInput:e=>{x.previewUrl=e}})),d(f,{label:"项目地址",labelPlacement:"left",labelStyle:{width:"6rem"}},d(h,{placeholder:"",value:x.projectUrl,onInput:e=>{x.projectUrl=e}})),d(f,{label:"项目描述",required:!0,labelPlacement:"left",labelStyle:{width:"6rem"}},d(h,{placeholder:"",value:x.description,onInput:e=>{x.description=e}})),d(f,{label:"项目图标",labelPlacement:"left",labelStyle:{width:"6rem"}},d(h,{placeholder:"",value:x.avatar,onInput:e=>{x.avatar=e}})),d(f,{label:"项目图标",labelPlacement:"left",labelStyle:{width:"6rem"}},d(v,{value:x.images,onUpdateValue:e=>{x.images=e}})),d(f,{label:"正文",required:!0},d(l,{onChange:e=>{x.text=e},text:x.text,class:"h-40 w-full",unSaveConfirm:!1}))))}});export default _;
//# sourceMappingURL=edit-518c62be-2_19_59.js.map
